{"version":3,"sources":["hooks/auth.hook.js","components/Sidebar.js","context/AuthContext.js","hooks/http.hook.js","hooks/message.hook.js","store/actions/authActions.js","pages/Auth/AuthPage.js","store/actionCreators/authActionCreator.js","store/actions/cabinetActions.js","pages/Cabinet/CabinetPage.js","store/actionCreators/cabinetActionCreator.js","store/actions/deviceGroupActions.js","store/actionCreators/deviceGroupActionCreator.js","pages/DeviceGroup/DeviceGroupCard.js","components/Preloader.js","pages/DeviceGroup/DeviceGroupsPage.js","pages/DeviceGroup/DeviceGroupAddPage.js","store/actions/playlistActions.js","store/actionCreators/playlistActionCreator.js","pages/Playlist/PlaylistCard.js","pages/Playlist/PlaylistsPage.js","store/actions/videoActions.js","store/actionCreators/videoActionCreator.js","pages/Playlist/PlaylistVideoCard.js","pages/Playlist/PlaylistPage.js","pages/Playlist/PlaylistAddPage.js","pages/Playlist/PlaylistAddContentPage.js","store/actions/scheduleActions.js","store/actionCreators/scheduleActionCreator.js","pages/Schedule/ScheduleCard.js","pages/Schedule/SchedulesPage.js","pages/Schedule/ScheduleAddPage.js","pages/Schedule/ScheduleEditPage.js","store/actions/usergroupActions.js","store/actionCreators/usergroupActionCreator.js","pages/UserGroup/UserGroupCard.js","pages/UserGroup/UserGroupsPage.js","pages/UserGroup/UserGroupAddPage.js","pages/Video/VideoCard.js","pages/Video/VideosPage.js","pages/Video/VideoPage.js","pages/Video/VideoAddPage.js","store/actions/userActions.js","store/actionCreators/userActionCreator.js","pages/User/UserCard.js","pages/User/UsersPage.js","pages/User/UserAddPage.js","pages/User/UserSetGroupPage.js","pages/Watch/WatchPage.js","components/Navbar.js","components/HeadTag.js","App.js","routes.js","reportWebVitals.js","store/reducers/deivceGroupReducer.js","store/reducers/authReducer.js","store/reducers/cabinetReducer.js","store/reducers/playlistReducer.js","store/reducers/scheduleReducer.js","store/reducers/userReducer.js","store/reducers/videoReducer.js","store/reducers/usergroupReducer.js","store/store.js","index.js"],"names":["storageName","jwt","require","Sidebar","useState","token","setToken","level","setLevel","className","style","padding","marginRight","component","setComponent","useEffect","JSON","parse","localStorage","getItem","newComponent","data","decode","to","display","noop","AuthContext","createContext","login","logout","isAutheticated","useHttp","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","stringify","fetch","response","json","ok","Error","message","clearError","useMessage","text","window","M","toast","html","AUTH_SET_FORM","AUTH_CLEAR_FORM","AuthPage","auth","useContext","dispatch","useDispatch","form","useSelector","state","authReducer","changeHandler","event","target","value","name","type","loginHandler","username","password","authContext","responce","authLogin","id","onChange","htmlFor","onClick","disabled","CABINET_SET_DATA","CabinetPage","cabinetReducer","levelName","loadHandler","DEVICE_GROUP_SET_SUCCEED","DEVICE_GROUP_SET_FORM","DEVICE_GROUP_SET_GROUPS","DEVICE_GROUP_CLEAR_FORM","DEVICE_GROUP_SET_PRELOADER","deviceGroupSetSucceed","newIsSucceed","deviceGroupSetGroups","deviceGroupAdd","deviceGroupSetPreloader","deviceGroupLoad","isLoading","DeviceGroupCard","props","outerLink","deleteHandler","deviceGroupDelete","marginBottom","border","Preloader","DeviceGroupsPage","deviceGroups","deviceGroupReducer","map","g","outer_link","preloader","width","DeviceGroupAddPage","store","isSucceed","createHandler","link","PLAYLIST_NEW_SET_SUCCEED","PLAYLIST_NEW_SET_FORM","PLAYLIST_SET_ALL","PLAYLIST_SET_CURRENT","PLAYLIST_SET_CONTENT","PLAYLIST_SET_ALL_VIDEOS","PLAYLIST_NEW_CONTENT_FORM","PLAYLIST_NEW_CLEAR_FORM","PLAYLIST_NEW_CLEAR_CONTENT_FORM","PLAYLIST_SET_PRELOADER","playlistNewSetSucceed","playlistSetAll","playlistLoadAll","playlistSetPreloader","playlistSetContent","playlistLoadContent","playlistId","playlistSetAllVideos","PlaylistCard","playlistDelete","clickHandler","playlistSetCurrent","PlaylistsPage","playlists","playlistReducer","p","VIDEO_SET_VIDEOS","VIDEO_SET_CURRENT_VIDEO","VIDEO_SET_USER_LEVEL","VIDEO_SET_ADD_FORM","VIDEO_SET_SUCCEED","VIDEO_SET_APPROVED","VIDEO_CLEAR_ADD_FORM","VIDEO_SET_PRELOADER","videoSetVideos","videoLoadVideos","videoSetPreloader","videoSetCurrentVideo","source","isApproved","videoSetUserLevel","userLevel","videoSetAddForm","videoSetSucceed","videoClearAddForm","PlaylistVideoCard","contentId","playlistDeleteContent","PlaylistPage","currentPlaylistId","currentPlaylistName","videos","currentPlaylistContents","v","content","is_approved","content_id","PlaylistAddPage","playlistNewCreate","PlaylistAddContentPage","allVideos","addContentForm","filteredData","filter","d","position","playlistAddContent","min","SCHEDULE_SET_ALL","SCHEDULE_SET_CURRENT","SCHEDULE_SET_ADD_FORM","SCHEDULE_SET_DEVICE_GROUPS","SCHEDULE_SET_PLAYLISTS","SCHEDULE_SET_SUCCEED","SCHEDULE_SET_UPDATE_FORM","SCHEDULE_CLEAR_ADD_FORM","SCHEDULE_CLEAR_UPDATE_FORM","SCHEDULE_SET_PRELOADER","SCHEDULE_SET_USER_DATA","scheduleSetAll","scheduleLoadAll","deviceGroupId","scheduleSetPreloader","s","devicegroup","devicegroupId","scheduleSetDeviceGroups","scheduleSetPlaylists","schedulesSetIsSucceed","scheduleSetUserData","ScheduleCard","timeStart","timeEnd","deviceGroupName","playlistName","scheduleId","SchedulesPage","scheduleReducer","userData","schedules","playlist","time_start","time_end","dataToken","responceUser","dataUser","devices","length","scheduleGetUserData","ScheduleAddPage","devicegroups","addForm","shedulesGetDeviceGroups","e","playlist_id","devices_id","schedulesAdd","paddingLeft","defaultValue","ScheduleEditPage","updateForm","currentScheduleId","initializeHandler","saveHandler","schedulesUpdate","USERGROUP_SET_GROUPS","USERGROUP_SET_FORM","USERGROUP_SET_DEVICE_GROUPS","USERGROUP_SET_SUCCEED","USERGROUP_CLEAR_FORM","USERGROUP_SET_PRELOADER","usergroupSetGroups","usergroupLoadGroups","usergroupSetPreloader","usergroupSetDeviceGroups","usergroupSetSucceed","UserGroupCard","groupId","UserGroupsPage","usergroupReducer","userGroups","UserGroupAddPage","usergroupAdd","VideoCard","proxy","location","origin","videoReducer","videoId","VideosPage","VideoPage","currentVideo","approvingHandler","videoSetApprovedVideo","marginTop","controls","flexDirection","textAlign","paddingTop","backgroundColor","paddingBottom","color","VideoAddPage","addVideoForm","changeFile","files","preventDefault","filetype","file","FormData","append","XHRRequest","XMLHttpRequest","open","send","onload","status","videoAdd","placeholder","accept","USER_SET_ADD_FORM","USER_SET_SUCCEED","USER_SET_GROUPS","USER_SET_CURRENT_USERNAME","USER_SET_CURRENT_ID","USER_SET_CURRENT_LEVEL","USER_SET_GROUP_FORM","USER_SET_USERS","USER_CLEAR_ADD_FORM","USER_CLEAR_GROUP_FORM","USER_SET_PRELOADER","userSetSucceed","userSetGroups","userSetUsers","userLoadUsers","userSetPreloader","UserCard","usergroup","setLevelName","usergroupOutput","setUserGroupOutput","userSetCurrentUsername","userId","UsersPage","setActivePage","setisFirst","setIsLast","totalPages","userReducer","users","u","newValue","console","log","UserAddPage","userAdd","UserSetGroupPage","currentUsername","currentUserId","currentUserLevel","groupForm","group_id","userSetGroup","WatchPage","useParams","setCurrentVideo","setPlaylist","isLoaded","setIsLoaded","setTimeEnd","initHandler","links","Date","top","left","right","bottom","justifyContent","alignItems","playing","height","onEnded","now","Navbar","history","useHistory","paddingRight","href","push","HeadTag","Helmet","rel","App","jwtToken","setItem","removeItem","useAuth","routes","path","exact","useRoutes","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","action","newForm","result","currentVideoId","currentVideoName","newAddForm","newUpdateForm","newUserData","newGroupForm","newCurrentVideo","newAddVideoForm","rootReducer","combineReducers","createStore","compose","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0227931a.chunk.js","sourcesContent":["import { useState, useCallback, useEffect } from \"react\"\r\n//import jwt from 'jsonwebtoken'\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null)\r\n\r\n    const login = useCallback((jwtToken) => {\r\n        setToken(jwtToken)\r\n\r\n        //Отправить эти данные в стор!!!\r\n        //const data = jwt.decode(jwtToken).username\r\n\r\n        localStorage.setItem(storageName, JSON.stringify({token: jwtToken}))\r\n    }, [])\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null)\r\n\r\n        localStorage.removeItem(storageName)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if (data && data.token) {\r\n            login(data.token)\r\n        }\r\n    }, [login])\r\n\r\n    return { login, logout, token }\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nconst jwt = require('jsonwebtoken')\r\n\r\nexport const Sidebar = () => {\r\n    const [token, setToken] = useState(null)\r\n    const [level, setLevel] = useState(0)\r\n    const [component, setComponent] = useState(\r\n        <div className=\"collection col s2\" style={{padding: 0, marginRight: \"4%\"}}>\r\n        </div>\r\n    )\r\n\r\n    useEffect(() => {\r\n        setToken(JSON.parse(localStorage.getItem('userData')).token)\r\n        const data = jwt.decode(token)\r\n\r\n        if (data) {\r\n            setLevel(data.level)\r\n        } else {\r\n            setLevel('неизвестно')\r\n        }\r\n\r\n        let newComponent\r\n        switch(level){\r\n            case 0: \r\n                newComponent = (\r\n                    <div className=\"collection col s2\" style={{padding: 0, marginRight: \"4%\"}}>\r\n                        <NavLink to=\"/videos\" className=\"collection-item\">Видео</NavLink>\r\n                    </div>\r\n                )\r\n                break\r\n            case 1:\r\n                newComponent = (\r\n                    <div className=\"collection col s2\" style={{padding: 0, marginRight: \"4%\"}}>\r\n                        <NavLink to=\"/videos\" className=\"collection-item\">Видео</NavLink>\r\n                        <NavLink to=\"/playlists\" className=\"collection-item\">Плейлисты</NavLink>\r\n                        <NavLink to=\"/schedules\" className=\"collection-item\">Расписания</NavLink>\r\n                    </div>\r\n                )\r\n                break\r\n            case 2:\r\n                newComponent = (\r\n                    <div className=\"collection col s2\" style={{padding: 0, marginRight: \"4%\"}}>\r\n                        <NavLink to=\"/videos\" className=\"collection-item\" style={{display: \"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>smart_display</i>\r\n                            <span className=\"hide-on-med-and-down\">Видео</span>\r\n                        </NavLink>\r\n                        <NavLink to=\"/playlists\" className=\"collection-item\" style={{display: \"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>playlist_play</i>\r\n                            <span className=\"hide-on-med-and-down\">Плейлисты</span>\r\n                        </NavLink>\r\n                        <NavLink to=\"/schedules\" className=\"collection-item\" style={{display: \"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>date_range</i>\r\n                            <span className=\"hide-on-med-and-down\">Расписания</span>\r\n                        </NavLink>\r\n                        <NavLink to=\"/devicegroups\" className=\"collection-item\" style={{display: \"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>devices</i>\r\n                            <span className=\"hide-on-med-and-down\">Группы устройств</span>\r\n                        </NavLink>\r\n                        <NavLink to=\"/usergroups\" className=\"collection-item\" style={{display: \"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>groups</i>\r\n                            <span className=\"hide-on-med-and-down\">Группы пользователей</span>\r\n                        </NavLink>\r\n                        <NavLink to=\"/users\" className=\"collection-item\" style={{display: \"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>person</i>\r\n                            <span className=\"hide-on-med-and-down\">Пользователи</span>\r\n                        </NavLink>\r\n                    </div>\r\n                )\r\n                break\r\n            default:\r\n                newComponent = (\r\n                    <div className=\"collection col s2\" style={{padding: 0, marginRight: \"4%\"}}>\r\n                        <NavLink to=\"/videos\" className=\"collection-item\">Видео</NavLink>\r\n                    </div>\r\n                )\r\n        }\r\n        setComponent(newComponent)\r\n\r\n    }, [level, token])\r\n    \r\n\r\n    return component || <div className=\"collection col s2\" style={{padding: 0, marginRight: \"4%\"}}></div>\r\n}","import { createContext } from \"react\";\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null,\r\n    login: noop,\r\n    logout: noop,\r\n    isAutheticated: false\r\n})","import {useState, useCallback} from 'react'\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState(null)\r\n\r\n    const request = useCallback( async (url, method = 'GET', body = null, headers = {}) => {\r\n        setLoading(true)\r\n        try {\r\n            if (!headers['Content-Type']) {\r\n                (headers['Content-Type'] = 'application/json')\r\n            }\r\n            if (body && headers['Content-Type'] === 'application/json') {\r\n                body = JSON.stringify(body)\r\n            }\r\n            const response = await fetch(url, { method, body, headers })\r\n            const data = await response.json()\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.message || 'Запрос на сервер не удалось выполнить')\r\n            }\r\n\r\n            setLoading(false)\r\n\r\n            return data\r\n        } catch(e) {\r\n            setLoading(false)\r\n            setError(e.message)\r\n            throw e\r\n        }\r\n    }, [])\r\n\r\n    const clearError = useCallback(() => setError(null), [])\r\n\r\n    return { loading, request, error, clearError }\r\n}","import { useCallback } from \"react\"\r\n\r\nexport const useMessage = () => {\r\n    return useCallback(text => {\r\n        if (window.M && text){\r\n            window.M.toast({ html: text })\r\n        }\r\n    }, [])\r\n}","export const AUTH_SET_FORM = 'AUTH_SET_FORM'\r\nexport const AUTH_CLEAR_FORM = 'AUTH_CLEAR_FORM'","import React, {useCallback, useContext} from \"react\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { AuthContext } from \"../../context/AuthContext\"\r\nimport { useHttp } from \"../../hooks/http.hook\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { authSetForm, authLogin } from \"../../store/actionCreators/authActionCreator\"\r\n\r\nexport const AuthPage = () => {\r\n    const auth = useContext(AuthContext)\r\n    const {loading} = useHttp()\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const form = useSelector(state => state.authReducer.form)\r\n\r\n    const changeHandler = event => {\r\n        dispatch(authSetForm(event.target.name, event.target.value))\r\n    }\r\n\r\n    const loginHandler = useCallback(() => {\r\n        if (!form.username) {\r\n            message(\"Ошибка: не указано имя пользователя\")\r\n            return\r\n        }\r\n        if (!form.password) {\r\n            message(\"Ошибка: не указан пароль\")\r\n            return\r\n        }\r\n        dispatch(authLogin(form, auth))\r\n    }, [dispatch, message, form, auth])\r\n\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s6 offset-s3\">\r\n                <h1>Система вещания НГТУ</h1>\r\n                <div className=\"card blue-grey darken-1\">\r\n                    <div className=\"card-content white-text\">\r\n                        <span className=\"card-title\">Авторизация</span>\r\n\r\n                        <div>\r\n                            <div className=\"row\">\r\n                                <div className=\"input-field col s12\">\r\n                                    <input id=\"username\" name=\"username\" value={form.username} type=\"text\" onChange={changeHandler} />\r\n                                    <label htmlFor=\"username\">Имя пользователя</label>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <div className=\"input-field col s12\">\r\n                                    <input id=\"password\" name=\"password\" value={form.password} type=\"password\" onChange={changeHandler} />\r\n                                    <label htmlFor=\"password\">Пароль</label>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"card-action\">\r\n                        <button className=\"btn yellow darken-4\" onClick={loginHandler} disabled={loading}>Войти</button>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {\r\n  AUTH_SET_FORM,\r\n  AUTH_CLEAR_FORM\r\n} from '../actions/authActions'\r\n\r\nexport function authSetForm (target, value) {\r\n  return {\r\n    type: AUTH_SET_FORM,\r\n    data: {target, value}\r\n  }\r\n}\r\n\r\nexport function authClearForm () {\r\n  return {\r\n    type: AUTH_CLEAR_FORM\r\n  }\r\n}\r\n\r\nexport function authLogin (form, authContext) {\r\n  return async (dispatch) => {\r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n\r\n    const responce = await fetch(\"/api/user/login\", {method, headers, body})\r\n    const data = await responce.json()\r\n    if (responce.ok){\r\n      authContext.login(data)\r\n      dispatch(authClearForm())\r\n    }\r\n  }\r\n}","export const CABINET_SET_DATA = 'CABINET_SET_DATA'","import React, { useCallback, useEffect} from \"react\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { cabinetSetData } from \"../../store/actionCreators/cabinetActionCreator\"\r\n\r\nexport const CabinetPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const username = useSelector(state => state.cabinetReducer.username)\r\n    const levelName = useSelector(state => state.cabinetReducer.levelName)\r\n\r\n    const loadHandler = useCallback(() => {\r\n        dispatch(cabinetSetData(JSON.parse(localStorage.getItem('userData')).token))\r\n    }, [dispatch])\r\n\r\n    useEffect(() => { loadHandler() }, [loadHandler])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Личный кабинет</h1>\r\n            <div>\r\n                <span className=\"cabinet-page__username\">Имя пользователя: {username}</span><br />\r\n                <span className=\"cabinet-page__group\">Тип пользователя: {levelName}</span>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import {\r\n  CABINET_SET_DATA\r\n} from '../actions/cabinetActions'\r\n\r\nexport function cabinetSetData(token) {\r\n  return{\r\n    type: CABINET_SET_DATA,\r\n    token\r\n  }\r\n}","export const DEVICE_GROUP_SET_SUCCEED = 'DEVICE_GROUP_SET_SUCCEED'\r\nexport const DEVICE_GROUP_SET_FORM = 'DEVICE_GROUP_SET_FORM'\r\nexport const DEVICE_GROUP_SET_GROUPS = 'DEVICE_GROUP_SET_GROUPS'\r\nexport const DEVICE_GROUP_CLEAR_FORM = 'DEVICE_GROUP_CLEAR_FORM'\r\nexport const DEVICE_GROUP_SET_PRELOADER = 'DEVICE_GROUP_SET_PRELOADER'","import {\r\n  DEVICE_GROUP_SET_SUCCEED, \r\n  DEVICE_GROUP_SET_FORM, \r\n  DEVICE_GROUP_SET_GROUPS,\r\n  DEVICE_GROUP_CLEAR_FORM,\r\n  DEVICE_GROUP_SET_PRELOADER\r\n} from '../actions/deviceGroupActions'\r\n\r\nexport function deviceGroupSetSucceed (newIsSucceed) {\r\n  return {\r\n    type: DEVICE_GROUP_SET_SUCCEED,\r\n    data: newIsSucceed\r\n  }\r\n}\r\n\r\nexport function deviceGroupSetForm (target, value) {\r\n  return {\r\n    type: DEVICE_GROUP_SET_FORM,\r\n    data: { target, value }\r\n  }\r\n}\r\n\r\nexport function deviceGroupClearForm () {\r\n  return {\r\n    type: DEVICE_GROUP_CLEAR_FORM\r\n  }\r\n}\r\n\r\nexport function deviceGroupSetGroups (data) {\r\n  return {\r\n    type: DEVICE_GROUP_SET_GROUPS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function deviceGroupAdd (form) {\r\n  return async (dispatch) => {\r\n    dispatch(deviceGroupSetPreloader(true))\r\n\r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n\r\n    const responce = await fetch(\"/api/devicegroup/create\", {method, headers, body})\r\n    if (responce.ok)\r\n      dispatch(deviceGroupSetSucceed(true))\r\n\r\n    dispatch(deviceGroupClearForm())\r\n    dispatch(deviceGroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function deviceGroupLoad() {\r\n  return async (dispatch) => {\r\n    dispatch(deviceGroupSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/devicegroup\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok){\r\n      dispatch(deviceGroupSetGroups(data))\r\n    }\r\n    dispatch(deviceGroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function deviceGroupDelete(id) {\r\n  return async (dispatch) => {\r\n    dispatch(deviceGroupSetPreloader(true))\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n\r\n    const responce = await fetch(\"/api/devicegroup/\" + id, {method, headers})\r\n    if (responce.ok)\r\n      dispatch(deviceGroupLoad())\r\n\r\n    dispatch(deviceGroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function deviceGroupSetPreloader(isLoading) {\r\n  return {\r\n    type: DEVICE_GROUP_SET_PRELOADER,\r\n    data: isLoading\r\n  }\r\n}\r\n","import React, { useCallback } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch } from \"react-redux\"\r\nimport { deviceGroupDelete } from \"../../store/actionCreators/deviceGroupActionCreator\"\r\n\r\nexport const DeviceGroupCard = (props) => {\r\n    const dispatch = useDispatch()\r\n    const {name, id, outerLink} = props\r\n\r\n    const deleteHandler = useCallback(() => {\r\n        dispatch(deviceGroupDelete(id))\r\n    }, [dispatch, id])\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink \r\n                    to={\"/watch/\" + outerLink} \r\n                    className=\"collection-item card\" \r\n                    style={{marginBottom: \"25px\", border: \"1px solid grey\"}}\r\n                >\r\n                    {name}\r\n                </NavLink>\r\n            </div>\r\n            <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                <i className=\"material-icons\">delete</i>\r\n            </button>\r\n        </div>\r\n        \r\n    )\r\n}","import React from 'react'\r\n\r\nexport const Preloader = () => {\r\n  return (\r\n    <div className=\"preloader-wrapper big active\">\r\n      <div className=\"spinner-layer spinner-blue\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"gap-patch\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"circle-clipper right\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"spinner-layer spinner-red\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"gap-patch\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"circle-clipper right\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"spinner-layer spinner-yellow\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"gap-patch\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"circle-clipper right\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"spinner-layer spinner-green\">\r\n        <div className=\"circle-clipper left\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"gap-patch\">\r\n          <div className=\"circle\"></div>\r\n        </div><div className=\"circle-clipper right\">\r\n          <div className=\"circle\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { useDispatch, useSelector} from 'react-redux'\r\nimport { DeviceGroupCard } from \"./DeviceGroupCard\"\r\nimport { Preloader } from \"../../components/Preloader\"\r\nimport { deviceGroupLoad, deviceGroupSetSucceed } from \"../../store/actionCreators/deviceGroupActionCreator\"\r\n\r\nexport const DeviceGroupsPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const deviceGroups = useSelector(state => {\r\n        const groups = state.deviceGroupReducer.deviceGroups\r\n        const transformedGroups = groups.map(g => \r\n            <DeviceGroupCard \r\n                key={g.id} \r\n                name={g.name} \r\n                id={g.id} \r\n                outerLink={g.outer_link} \r\n            />)\r\n        return transformedGroups\r\n    })\r\n    const loading = useSelector(state => state.deviceGroupReducer.preloader)\r\n\r\n    const loadHandler = useCallback(() => {\r\n        dispatch(deviceGroupSetSucceed(false))\r\n        dispatch(deviceGroupLoad())\r\n    }, [dispatch])\r\n\r\n    useEffect(() => {loadHandler()}, [loadHandler])\r\n    \r\n\r\n    return (\r\n        <div>\r\n            <h1>Группы устройств</h1>\r\n            { loading && <Preloader />}\r\n            { !loading && <div>\r\n                <NavLink key=\"new\" to=\"/devicegroup/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { !loading && deviceGroups }\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import React from \"react\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { deviceGroupAdd, deviceGroupSetForm} from \"../../store/actionCreators/deviceGroupActionCreator\"\r\n\r\nexport const DeviceGroupAddPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n    \r\n    const form = useSelector (store => store.deviceGroupReducer.form)\r\n    const isSucceed = useSelector (store => store.deviceGroupReducer.isSucceed)\r\n\r\n\r\n    const changeHandler = event => {\r\n        dispatch(deviceGroupSetForm(event.target.name, event.target.value));\r\n    }\r\n\r\n    const createHandler = async () => {\r\n        if (!form.name) {\r\n            message(\"Ошибка: не задано имя группы\")\r\n            return\r\n        }\r\n\r\n        dispatch(deviceGroupAdd(form))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Создание новой группы устройств</h1>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"name\" name=\"name\" value={form.name} type=\"text\" className=\"validate\" onChange={changeHandler} />\r\n                            <label htmlFor=\"name\">Название группы</label>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"link\" name=\"link\" value={form.link} type=\"text\" onChange={changeHandler} />\r\n                            <label htmlFor=\"link\">Ссылка на группу(необязательно)</label>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>\r\n                </div>\r\n            </div>\r\n\r\n            {isSucceed && <Redirect to=\"/devicegroups\" />}\r\n\r\n        </div>\r\n    )\r\n}","export const PLAYLIST_NEW_SET_SUCCEED = 'PLAYLIST_NEW_SET_SUCCEED'\r\nexport const PLAYLIST_NEW_SET_FORM = 'PLAYLIST_NEW_SET_FORM'\r\nexport const PLAYLIST_SET_ALL = 'PLAYLIST_SET_ALL'\r\nexport const PLAYLIST_SET_CURRENT = 'PLAYLIST_SET_CURRENT'\r\nexport const PLAYLIST_SET_CONTENT = 'PLAYLIST_SET_CONTENT'\r\nexport const PLAYLIST_SET_ALL_VIDEOS = 'PLAYLIST_SET_ALL_VIDEOS'\r\nexport const PLAYLIST_NEW_CONTENT_FORM = 'PLAYLIST_NEW_CONTENT_FORM'\r\nexport const PLAYLIST_SET_CURRENT_VIDEO = 'PLAYLIST_SET_CURRENT_VIDEO'\r\nexport const PLAYLIST_NEW_CLEAR_FORM = 'PLAYLIST_NEW_CLEAR_FORM'\r\nexport const PLAYLIST_NEW_CLEAR_CONTENT_FORM = 'PLAYLIST_NEW_CLEAR_CONTENT_FORM'\r\nexport const PLAYLIST_SET_PRELOADER = 'PLAYLIST_SET_PRELOADER'","import {\r\n  PLAYLIST_NEW_SET_SUCCEED, \r\n  PLAYLIST_NEW_SET_FORM,\r\n  PLAYLIST_SET_ALL,\r\n  PLAYLIST_SET_CURRENT,\r\n  PLAYLIST_SET_CONTENT,\r\n  PLAYLIST_SET_ALL_VIDEOS,\r\n  PLAYLIST_NEW_CONTENT_FORM,\r\n  PLAYLIST_SET_CURRENT_VIDEO,\r\n  PLAYLIST_NEW_CLEAR_FORM,\r\n  PLAYLIST_NEW_CLEAR_CONTENT_FORM,\r\n  PLAYLIST_SET_PRELOADER\r\n} from '../actions/playlistActions'\r\n\r\nexport function playlistNewSetSucceed (newIsSucceed) {\r\n  return {\r\n    type: PLAYLIST_NEW_SET_SUCCEED,\r\n    data: newIsSucceed\r\n  }\r\n}\r\n\r\nexport function playlistNewSetForm (target, value) {\r\n  return {\r\n    type: PLAYLIST_NEW_SET_FORM,\r\n    data: { target, value }\r\n  }\r\n}\r\n\r\nexport function playlistNewCreate (form) {\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n\r\n    const responce = await fetch(\"/api/playlist/create\", {method, headers, body})\r\n    if (responce.ok)\r\n      dispatch(playlistNewSetSucceed(true))\r\n    \r\n    dispatch(playlistNewClearForm())\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistSetAll (data) {\r\n  return {\r\n    type: PLAYLIST_SET_ALL,\r\n    data\r\n  }\r\n}\r\n\r\nexport function playlistLoadAll () {\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/playlist\", {method, headers})\r\n    \r\n    const data = await responce.json()\r\n    if (responce.ok){\r\n      dispatch(playlistSetAll(data))\r\n    }\r\n\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistDelete (id) {\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/playlist/\" + id, {method, headers})\r\n\r\n    if (responce.ok){\r\n      dispatch(playlistLoadAll())\r\n    }\r\n\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistSetCurrent (id, name) {\r\n  return {\r\n    type: PLAYLIST_SET_CURRENT,\r\n    data: {id, name}\r\n  }\r\n}\r\n\r\nexport function playlistSetContent (data) {\r\n  return {\r\n    type: PLAYLIST_SET_CONTENT,\r\n    data\r\n  }\r\n}\r\n\r\nexport function playlistLoadContent (playlistId) {\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/playlist/content/\" + playlistId, {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok){\r\n      dispatch(playlistSetContent(data))\r\n    }\r\n\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistDeleteContent (playlistId, contentId) {\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/playlist/deletecontent/\" + contentId, {method, headers})\r\n\r\n    if (responce.ok){\r\n      dispatch(playlistLoadContent(playlistId))\r\n    }\r\n\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistAddContent (playlistId, contentId, position){\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({\r\n      \"content_id\": contentId, \r\n      \"position\": position, \r\n      \"playlist_id\": playlistId\r\n    })\r\n\r\n    const responce = await fetch(\"/api/playlist/addcontent\", {method, headers, body})\r\n\r\n    if (responce.ok){\r\n      dispatch(playlistLoadContent(playlistId))\r\n      dispatch(playlistNewSetSucceed(true))\r\n      dispatch(playlistNewContentClearForm())\r\n    }\r\n\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistSetAllVideos(data) {\r\n  return {\r\n    type: PLAYLIST_SET_ALL_VIDEOS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function playlistGetInsertableVideos() {\r\n  return async (dispatch) => {\r\n    dispatch(playlistSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/content\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    const filteredData = data.filter(d => d.is_approved)\r\n    if (responce.ok){\r\n      dispatch(playlistSetAllVideos(filteredData))\r\n    }\r\n\r\n    dispatch(playlistSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function playlistNewContentForm (target, value) {\r\n  return {\r\n    type: PLAYLIST_NEW_CONTENT_FORM,\r\n    data: { target, value }\r\n  }\r\n}\r\n\r\nexport function playlistSetCurrentVideo (id, name) {\r\n  return {\r\n    type: PLAYLIST_SET_CURRENT_VIDEO,\r\n    data: {id, name}\r\n  }\r\n}\r\n\r\nexport function playlistNewClearForm () {\r\n  return {\r\n    type: PLAYLIST_NEW_CLEAR_FORM\r\n  }\r\n}\r\n\r\nexport function playlistNewContentClearForm () {\r\n  return {\r\n    type: PLAYLIST_NEW_CLEAR_CONTENT_FORM\r\n  }\r\n}\r\n\r\nexport function playlistSetPreloader(isLoading) {\r\n  return {\r\n    type: PLAYLIST_SET_PRELOADER,\r\n    data: isLoading\r\n  }\r\n}","import React, { useCallback } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch } from \"react-redux\"\r\nimport { playlistDelete, playlistSetCurrent } from \"../../store/actionCreators/playlistActionCreator\"\r\n\r\nexport const PlaylistCard = (props) => {\r\n    const {name, id} = props\r\n    const dispatch = useDispatch()\r\n    \r\n    const deleteHandler = useCallback( () => {\r\n        dispatch(playlistDelete(id))\r\n    }, [id, dispatch])\r\n\r\n    const clickHandler = useCallback( () => {\r\n        dispatch(playlistSetCurrent(id, name))\r\n    }, [dispatch, id, name])\r\n\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink \r\n                    to={\"/playlists/\" + id} \r\n                    className=\"collection-item card\" \r\n                    style={{marginBottom: \"50px\", border: \"1px solid grey\"}}\r\n                    onClick={clickHandler}\r\n                >\r\n                    {name}\r\n                </NavLink>\r\n            </div>\r\n            <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                <i className=\"material-icons\">delete</i>\r\n            </button>\r\n        </div>\r\n        \r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { PlaylistCard } from \"./PlaylistCard\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { playlistLoadAll, playlistNewSetSucceed } from \"../../store/actionCreators/playlistActionCreator\"\r\n\r\nexport const PlaylistsPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const playlists = useSelector(state => {\r\n        const rawPlaylists = state.playlistReducer.playlists\r\n        const transformedPlaylists = rawPlaylists.map(p => \r\n            <PlaylistCard \r\n                key={p.id} \r\n                name={p.name} \r\n                id={p.id} \r\n            />\r\n        )\r\n        return transformedPlaylists\r\n    })\r\n    const loading = useSelector(state => state.playlistReducer.preloader)\r\n\r\n    const loadHandler = useCallback( () => {\r\n        dispatch(playlistNewSetSucceed(false))\r\n        dispatch(playlistLoadAll())\r\n    }, [dispatch])\r\n\r\n    useEffect(() => loadHandler(), [loadHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Плейлисты</h1>\r\n            { loading && <Preloader />}\r\n\r\n            { !loading &&\r\n            <div>\r\n                <NavLink key=\"new\" to=\"/playlist/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { playlists }\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}","export const VIDEO_SET_VIDEOS = 'VIDEO_SET_VIDEOS'\r\nexport const VIDEO_SET_CURRENT_VIDEO = 'VIDEO_SET_CURRENT_VIDEO'\r\nexport const VIDEO_SET_USER_LEVEL = 'VIDEO_SET_USER_LEVEL'\r\nexport const VIDEO_SET_ADD_FORM = 'VIDEO_SET_ADD_FORM'\r\nexport const VIDEO_SET_SUCCEED = 'VIDEO_SET_SUCCEED'\r\nexport const VIDEO_SET_APPROVED = 'VIDEO_SET_APPROVED'\r\nexport const VIDEO_CLEAR_ADD_FORM = 'VIDEO_CLEAR_ADD_FORM'\r\nexport const VIDEO_SET_PRELOADER = 'VIDEO_SET_PRELOADER'","import {\r\n  VIDEO_SET_VIDEOS,\r\n  VIDEO_SET_CURRENT_VIDEO,\r\n  VIDEO_SET_USER_LEVEL,\r\n  VIDEO_SET_ADD_FORM,\r\n  VIDEO_SET_SUCCEED,\r\n  VIDEO_SET_APPROVED,\r\n  VIDEO_CLEAR_ADD_FORM,\r\n  VIDEO_SET_PRELOADER\r\n} from \"../actions/videoActions\"\r\n\r\nexport function videoSetVideos(data) {\r\n  return {\r\n    type: VIDEO_SET_VIDEOS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function videoLoadVideos() {\r\n  return async(dispatch) => {\r\n    dispatch(videoSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/content\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok) {\r\n      dispatch(videoSetVideos(data))\r\n    }\r\n\r\n    dispatch(videoSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function videoDeleteVideo(videoId) {\r\n  return async(dispatch) => {\r\n    dispatch(videoSetPreloader(true))\r\n\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/content/\" + videoId, {method, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(videoLoadVideos())\r\n    }\r\n\r\n    dispatch(videoSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function videoSetCurrentVideo(id, name, link, source, isApproved) {\r\n  return {\r\n    type: VIDEO_SET_CURRENT_VIDEO,\r\n    data: {id, name, link, source, isApproved}\r\n  }\r\n}\r\n\r\nexport function videoSetUserLevel(level) {\r\n  return {\r\n    type: VIDEO_SET_USER_LEVEL,\r\n    data: { userLevel: level }\r\n  }\r\n}\r\n\r\nexport function videoSetAddForm(name, value) {\r\n  return {\r\n    type: VIDEO_SET_ADD_FORM,\r\n    data: {name, value}\r\n  }\r\n}\r\n\r\nexport function videoAdd(form) {\r\n  return async (dispatch) => {\r\n    dispatch(videoSetPreloader(true))\r\n\r\n    if (form && form.filetype === \"youtube\") {\r\n      const method = 'POST'\r\n      const headers = {'Content-Type': 'application/json'}\r\n      const body = JSON.stringify({...form})\r\n      const responce = await fetch(\"/api/content/create\", {method, body, headers})\r\n\r\n      if (responce.ok) {\r\n        dispatch(videoSetSucceed(true))\r\n        dispatch(videoClearAddForm())\r\n      }\r\n    }\r\n    else if (form && form.filetype !== \"youtube\") {\r\n      const data = new FormData()\r\n      data.append(\"name\", form.name)\r\n      data.append(\"filetype\", form.filetype)\r\n      data.append(\"outerLink\", form.outerLink)\r\n      data.append(\"file\", form.file)\r\n                \r\n      const XHRRequest = new XMLHttpRequest()\r\n      XHRRequest.open(\"POST\", \"/api/content/create\")\r\n      XHRRequest.send(data)\r\n\r\n\r\n      XHRRequest.onload = function() {\r\n        if (XHRRequest.status === 200)\r\n          dispatch(videoSetSucceed(true))\r\n          dispatch(videoClearAddForm())\r\n      }\r\n    }\r\n\r\n    dispatch(videoSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function videoSetSucceed(value) {\r\n  return {\r\n    type: VIDEO_SET_SUCCEED,\r\n    data: { isSucceed: value }\r\n  }\r\n}\r\n\r\nexport function videoSetApprovedVideo(currentVideo) {\r\n  return async(dispatch) => {\r\n    dispatch(videoSetPreloader(true))\r\n\r\n    const method = 'PUT'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({id: currentVideo.id})\r\n    const responce = await fetch(\"/api/content/approving\", {method, body, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(videoLoadVideos())\r\n      dispatch(videoSetCurrentVideo(\r\n        currentVideo.id, \r\n        currentVideo.name, \r\n        currentVideo.link, \r\n        currentVideo.source, \r\n        true))\r\n    }\r\n\r\n    dispatch(videoSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function videoSetApprovedField(value) {\r\n  return {\r\n    type: VIDEO_SET_APPROVED,\r\n    data: {value}\r\n  }\r\n}\r\n\r\nexport function videoGetApproved(videoId) {\r\n  return async(dispatch) => {\r\n    dispatch(videoSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/content/\" + videoId, {method, headers})\r\n\r\n    const data = await responce.json()\r\n\r\n    if (responce.ok) {\r\n      dispatch(videoSetApprovedField(data.is_approved))\r\n    }\r\n\r\n    dispatch(videoSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function videoClearAddForm() {\r\n  return {\r\n    type: VIDEO_CLEAR_ADD_FORM\r\n  }\r\n}\r\n\r\nexport function videoSetPreloader(isLoading) {\r\n  return {\r\n    type: VIDEO_SET_PRELOADER,\r\n    data: isLoading\r\n  }\r\n}","import React, { useCallback } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch} from \"react-redux\"\r\nimport { playlistDeleteContent } from \"../../store/actionCreators/playlistActionCreator\"\r\nimport { videoSetCurrentVideo } from \"../../store/actionCreators/videoActionCreator\"\r\n\r\nexport const PlaylistVideoCard = (props) => {\r\n    const {name, id, playlistId, contentId, link, source, isApproved} = props\r\n    const proxy = \"http://localhost:5000/\"\r\n    const dispatch = useDispatch()\r\n\r\n    const deleteHandler = useCallback(event => {\r\n        dispatch(playlistDeleteContent(playlistId, id))\r\n    }, [dispatch, id, playlistId])\r\n    \r\n    const clickHandler = useCallback( event => {\r\n        let finalLink\r\n        if (source === \"static\")\r\n            finalLink = proxy + link\r\n        else\r\n            finalLink = link \r\n        \r\n        dispatch(videoSetCurrentVideo(contentId, name, finalLink, source, isApproved))\r\n    }, [dispatch, contentId, name, link, source, isApproved])\r\n    \r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink \r\n                    to={\"/video/\" + contentId} \r\n                    className=\"collection-item card\" \r\n                    style={{marginBottom: \"25px\", border: \"1px solid grey\"}}\r\n                    onClick={clickHandler}\r\n                >\r\n                    <span>{name}</span>\r\n                </NavLink>\r\n            </div>\r\n            <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                <i className=\"material-icons\">delete</i>\r\n            </button>\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { PlaylistVideoCard } from \"./PlaylistVideoCard\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { playlistLoadContent, playlistNewSetSucceed } from \"../../store/actionCreators/playlistActionCreator\"\r\n\r\nexport const PlaylistPage = () => {    const dispatch = useDispatch()\r\n\r\n    const id = useSelector(state => state.playlistReducer.currentPlaylistId)\r\n    const name = useSelector(state => state.playlistReducer.currentPlaylistName)\r\n    const loading = useSelector(state => state.playlistReducer.loading)\r\n    const videos = useSelector(state => {\r\n        const rawVideos = state.playlistReducer.currentPlaylistContents\r\n        const transformedVideos = rawVideos.map(v => \r\n            v.contentId\r\n            ?   <PlaylistVideoCard \r\n                    key={v.id} \r\n                    name={v.content.name} \r\n                    id={v.id}\r\n                    playlistId={id}\r\n                    link={v.content.link}\r\n                    source={v.content.source}\r\n                    isApproved={v.content.is_approved}\r\n                    contentId={v.contentId}\r\n                />\r\n            :   <PlaylistVideoCard \r\n                    key={v.id} \r\n                    name={v.content.name} \r\n                    id={v.id}\r\n                    playlistId={id}\r\n                    link={v.content.link}\r\n                    source={v.content.source}\r\n                    isApproved={v.content.is_approved}\r\n                    contentId={v.content_id}\r\n                />\r\n        )\r\n\r\n        return transformedVideos\r\n    })\r\n\r\n    const loadHandler = useCallback (event => {\r\n        dispatch(playlistLoadContent(id))\r\n        dispatch(playlistNewSetSucceed(false))\r\n    }, [dispatch, id])\r\n\r\n    useEffect(() => {\r\n        loadHandler()\r\n    }, [loadHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Плейлист: {name}</h1>\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div> \r\n                <NavLink key=\"new\" to={\"/playlist/addcontent/\" + id} className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '180px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить видео</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { videos }\r\n                </div>\r\n            </div> \r\n            }\r\n            \r\n        </div>\r\n    )\r\n}","import React from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { playlistNewCreate, playlistNewSetForm } from \"../../store/actionCreators/playlistActionCreator\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\n\r\nexport const PlaylistAddPage = () => {\r\n    const dispatch = useDispatch()\r\n    const message = useMessage()\r\n\r\n    const isSucceed = useSelector(state => state.playlistReducer.isSucceed)\r\n    const form = useSelector(state => state.playlistReducer.form)\r\n\r\n    const changeHandler = event => {\r\n        dispatch(playlistNewSetForm(event.target.name, event.target.value))\r\n    }\r\n\r\n    const createHandler = event => {\r\n        if (!form.name) {\r\n            message(\"Ошибка: не задано имя плейлиста\")\r\n            return\r\n        }\r\n        dispatch(playlistNewCreate(form))\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Создание нового плейлиста</h1>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"name\" name=\"name\" type=\"text\" value={form.name} className=\"validate\" onChange={changeHandler} />\r\n                            <label htmlFor=\"name\">Название плейлиста</label>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>\r\n                </div>\r\n            </div>\r\n\r\n            {isSucceed && <Redirect to=\"/playlists\" />}\r\n\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { playlistGetInsertableVideos, playlistNewContentForm, playlistAddContent } from \"../../store/actionCreators/playlistActionCreator\"\r\n\r\nexport const PlaylistAddContentPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const isSucceed = useSelector(state => state.playlistReducer.isSucceed)\r\n    const playlistId = useSelector(state => state.playlistReducer.currentPlaylistId)   \r\n    const loading = useSelector(state => state.playlistReducer.loading)\r\n    const videos = useSelector(state => { \r\n        const rawVideos = state.playlistReducer.allVideos\r\n        const transformedVideos = rawVideos.map(v => \r\n            <option key={v.id} name=\"content_id\" value={v.id}>{v.name}</option>\r\n        )\r\n\r\n        return transformedVideos\r\n    }) \r\n    const form = useSelector(state => state.playlistReducer.addContentForm)\r\n\r\n    const loadHandler = useCallback( () => {\r\n        dispatch(playlistGetInsertableVideos())\r\n    }, [dispatch])\r\n\r\n    const changeHandler = useCallback( (event) => {\r\n        dispatch(playlistNewContentForm(event.target.name, event.target.value))\r\n    }, [dispatch])\r\n\r\n    const createHandler = useCallback ( () => {\r\n        if (!form.content_id) {\r\n            message(\"Ошибка: не выбрано видео\")\r\n            return\r\n        }\r\n\r\n        if (form.position < 1) {\r\n            message(\"Ошибка: некорректное значение позиции видео\")\r\n            return\r\n        }\r\n            \r\n        dispatch(playlistAddContent(playlistId, form.content_id, form.position))\r\n    }, [dispatch, message, playlistId, form])\r\n\r\n    useEffect( () => {\r\n        loadHandler()\r\n    }, [loadHandler])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Добавление видео в плейлист</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <select className=\"col browser-default\" value={form.content_id} name=\"content_id\" onChange={changeHandler}>\r\n                            <option value=\"0\" disabled>Выберите видео</option>\r\n                            {videos}\r\n                        </select>\r\n                        <div className=\"col\">\r\n                            <label htmlFor=\"position\">Позиция видео в плейлисте</label>\r\n                            <input type=\"number\" value={form.position} name=\"position\" id=\"position\" min=\"1\" onChange={changeHandler}/>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n            {isSucceed && <Redirect to=\"/playlists\" />}\r\n\r\n        </div>\r\n    )\r\n}","export const SCHEDULE_SET_ALL = 'SCHEDULE_SET_ALL'\r\nexport const SCHEDULE_SET_CURRENT = 'SCHEDULE_SET_CURRENT'\r\nexport const SCHEDULE_SET_ADD_FORM = 'SCHEDULE_SET_ADD_FORM'\r\nexport const SCHEDULE_SET_DEVICE_GROUPS = 'SCHEDULE_SET_DEVICE_GROUPS'\r\nexport const SCHEDULE_SET_PLAYLISTS = 'SCHEDULE_SET_PLAYLISTS'\r\nexport const SCHEDULE_SET_SUCCEED = 'SCHEDULE_SET_SUCCEED'\r\nexport const SCHEDULE_SET_UPDATE_FORM = 'SCHEDULE_SET_UPDATE_FORM'\r\nexport const SCHEDULE_CLEAR_ADD_FORM = 'SCHEDULE_CLEAR_ADD_FORM'\r\nexport const SCHEDULE_CLEAR_UPDATE_FORM = 'SCHEDULE_CLEAR_UPDATE_FORM'\r\nexport const SCHEDULE_SET_PRELOADER = 'SCHEDULE_SET_PRELOADER'\r\nexport const SCHEDULE_SET_USER_DATA = 'SCHEDULE_SET_USER_DATA'\r\n","import {\r\n  SCHEDULE_SET_ALL,\r\n  SCHEDULE_SET_CURRENT,\r\n  SCHEDULE_SET_PLAYLISTS,\r\n  SCHEDULE_SET_DEVICE_GROUPS,\r\n  SCHEDULE_SET_ADD_FORM,\r\n  SCHEDULE_SET_SUCCEED,\r\n  SCHEDULE_SET_UPDATE_FORM,\r\n  SCHEDULE_CLEAR_ADD_FORM,\r\n  SCHEDULE_CLEAR_UPDATE_FORM,\r\n  SCHEDULE_SET_PRELOADER,\r\n  SCHEDULE_SET_USER_DATA\r\n} from \"../actions/scheduleActions\"\r\nconst jwt = require('jsonwebtoken')\r\n\r\nexport function scheduleSetAll(data){\r\n  return{\r\n    type: SCHEDULE_SET_ALL,\r\n    data\r\n  }\r\n}\r\n\r\nexport function scheduleSetCurrent(scheduleId){\r\n  return{\r\n    type: SCHEDULE_SET_CURRENT,\r\n    scheduleId\r\n  }\r\n}\r\n\r\nexport function scheduleLoadAll(deviceGroupId) {\r\n  return async(dispatch) => {\r\n    dispatch(scheduleSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/schedule\", {method, headers})\r\n\r\n    let data = await responce.json()\r\n\r\n    if (responce.ok){\r\n      data = data.filter(s => s.devicegroup)\r\n\r\n      if (deviceGroupId > 0)\r\n        data = data.filter(s => s.devicegroupId === deviceGroupId)\r\n\r\n      dispatch(scheduleSetAll(data))\r\n    }\r\n\r\n    dispatch(scheduleSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function scheduleDelete(scheduleId) {\r\n  return async(dispatch) => {\r\n    dispatch(scheduleSetPreloader(true))\r\n\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/schedule/\" + scheduleId, {method, headers})\r\n\r\n    if (responce.ok){\r\n      dispatch(scheduleLoadAll())\r\n    }\r\n\r\n    dispatch(scheduleSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function scheduleSetAddForm(target, value){\r\n  return {\r\n    type: SCHEDULE_SET_ADD_FORM,\r\n    data: { target, value }\r\n  }\r\n}\r\n\r\nexport function scheduleSetDeviceGroups(data){\r\n  return {\r\n    type: SCHEDULE_SET_DEVICE_GROUPS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function scheduleSetPlaylists(data) {\r\n  return {\r\n    type: SCHEDULE_SET_PLAYLISTS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function shedulesGetDeviceGroups(deviceGroupId) {\r\n  return async (dispatch) => {\r\n    dispatch(scheduleSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n\r\n    let responce\r\n    let data\r\n    if (deviceGroupId <= 0) {\r\n      responce = await fetch(\"/api/devicegroup\", {method, headers})\r\n      data = await responce.json()\r\n    } else {\r\n      responce = await fetch(\"/api/devicegroup/\" + deviceGroupId, {method, headers})\r\n      data = await responce.json()\r\n      data = [data]\r\n    }\r\n\r\n    if (responce.ok){\r\n      dispatch(scheduleSetDeviceGroups(data))\r\n    }\r\n\r\n    dispatch(scheduleSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function shedulesGetPlaylists() {\r\n  return async (dispatch) => {\r\n    dispatch(scheduleSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/playlist\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok){\r\n      dispatch(scheduleSetPlaylists(data))\r\n    }\r\n\r\n    dispatch(scheduleSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function schedulesAdd(form) {\r\n  return async (dispatch) => {\r\n    dispatch(scheduleSetPreloader(true))\r\n\r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n    const responce = await fetch(\"/api/schedule\", {method, body, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(schedulesSetIsSucceed(true))\r\n      dispatch(scheduleClearAddForm())\r\n    }\r\n\r\n    dispatch(scheduleSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function schedulesSetIsSucceed(value) {\r\n  return {\r\n    type: SCHEDULE_SET_SUCCEED,\r\n    data: value\r\n  }\r\n}\r\n\r\nexport function schedulesSetUpdateForm(target, value) {\r\n  return {\r\n    type: SCHEDULE_SET_UPDATE_FORM,\r\n    data: {target, value}\r\n  }\r\n}\r\n\r\nexport function schedulesUpdate(form, scheduleId) {\r\n  return async (dispatch) => {\r\n    dispatch(scheduleSetPreloader(true))\r\n\r\n    const method = 'PUT'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n\r\n    const responce = await fetch(\"/api/schedule/\" + scheduleId, {method, body, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(schedulesSetIsSucceed(true))\r\n      dispatch(scheduleClearUpdateForm())\r\n    }\r\n\r\n    dispatch(scheduleSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function scheduleClearAddForm () {\r\n  return {\r\n    type: SCHEDULE_CLEAR_ADD_FORM\r\n  }\r\n}\r\n\r\nexport function scheduleClearUpdateForm () {\r\n  return {\r\n    type: SCHEDULE_CLEAR_UPDATE_FORM\r\n  }\r\n}\r\n\r\nexport function scheduleSetPreloader(isLoading) {\r\n  return {\r\n    type: SCHEDULE_SET_PRELOADER,\r\n    data: isLoading\r\n  }\r\n}\r\n\r\nexport function scheduleSetUserData(name, value) {\r\n  return {\r\n    type: SCHEDULE_SET_USER_DATA,\r\n    data: {name, value}\r\n  }\r\n}\r\n\r\nexport function scheduleGetUserData(token) {\r\n  return async(dispatch) => {\r\n    const dataToken = jwt.decode(token)\r\n\r\n    if (dataToken.level !== 1) {\r\n      dispatch(scheduleSetUserData(\"deviceGroupId\", 0))\r\n    } else {\r\n      const method = 'GET'\r\n      const headers = {'Content-Type': 'application/json'}\r\n      const responceUser = await fetch(\"/api/user/\" + dataToken.id, {method, headers})\r\n\r\n      const dataUser = await responceUser.json()\r\n      if (responceUser.ok) {\r\n        if (dataUser.devices.length > 0)\r\n        dispatch(scheduleSetUserData(\"deviceGroupId\", dataUser.devices[0].id))\r\n      }\r\n    }\r\n  }\r\n}","import React, { useCallback } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch } from 'react-redux'\r\nimport { scheduleDelete, scheduleSetCurrent } from \"../../store/actionCreators/scheduleActionCreator\"\r\n\r\nexport const ScheduleCard = (props) => {\r\n    const {id, timeStart, timeEnd, deviceGroupName, playlistName} = props\r\n    const dispatch = useDispatch()\r\n\r\n    const deleteHandler = useCallback( () => {\r\n        dispatch(scheduleDelete(id))\r\n    }, [dispatch, id])\r\n\r\n    const clickHandler = useCallback(() => {\r\n        dispatch(scheduleSetCurrent(id))\r\n    }, [dispatch, id])\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink to={\"/schedules/\" + id} className=\"collection-item card\" style={{marginBottom: \"50px\", border: \"1px solid grey\"}}>\r\n                    <span className=\"schedule-card__time\">{timeStart + \" - \" + timeEnd}</span><br/>\r\n                    <span className=\"schedule-card__devices\">Группа устройств: {deviceGroupName}</span><br/>\r\n                    <span className=\"schedule-card__playlist\">Плейлист: {playlistName}</span>\r\n                </NavLink>\r\n            </div>\r\n            \r\n            <NavLink className=\"btn\" to={\"/schedule/edit/\" + id} onClick={clickHandler} style={{marginRight: \"10px\"}}>\r\n                <i className=\"material-icons\">edit</i>\r\n            </NavLink>\r\n            \r\n            <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                <i className=\"material-icons\">delete</i>\r\n            </button>\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { ScheduleCard } from \"./ScheduleCard\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { scheduleLoadAll, scheduleGetUserData, schedulesSetIsSucceed } from \"../../store/actionCreators/scheduleActionCreator\"\r\n\r\nexport const SchedulesPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.scheduleReducer.preloader)\r\n    const deviceGroupId = useSelector(state => state.scheduleReducer.userData.deviceGroupId)\r\n    const schedules = useSelector(state => {\r\n        const rawShedules = state.scheduleReducer.schedules\r\n\r\n        const transformedSchedules = rawShedules.map(s => s.playlist\r\n            ? <ScheduleCard \r\n                key={s.id} \r\n                id={s.id} \r\n                timeStart={s.time_start} \r\n                timeEnd={s.time_end} \r\n                deviceGroupName={s.devicegroup.name} \r\n                playlistName={s.playlistId}\r\n            />\r\n            : true)\r\n\r\n        return transformedSchedules\r\n    })\r\n\r\n    const loadHandler = useCallback( () => {\r\n        const token = JSON.parse(localStorage.getItem('userData')).token\r\n        dispatch(scheduleGetUserData(token))\r\n        dispatch(scheduleLoadAll(deviceGroupId))\r\n        dispatch(schedulesSetIsSucceed(false))\r\n    }, [dispatch, deviceGroupId])\r\n\r\n    useEffect(() => {loadHandler()}, [loadHandler])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Расписания показов</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div>\r\n                <NavLink key=\"new\" to=\"/schedule/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { schedules }\r\n                </div>\r\n            </div>\r\n            }\r\n            \r\n        </div>\r\n    )\r\n}","import React, { useEffect, useCallback } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { \r\n    shedulesGetDeviceGroups, \r\n    shedulesGetPlaylists, \r\n    schedulesSetIsSucceed, \r\n    scheduleSetAddForm,\r\n    schedulesAdd\r\n} from \"../../store/actionCreators/scheduleActionCreator\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { Preloader } from '../../components/Preloader'\r\n\r\nexport const ScheduleAddPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.scheduleReducer.preloader)\r\n    const isSucceed = useSelector(state => state.scheduleReducer.isSucceed)\r\n    const deviceGroupId = useSelector(state => state.scheduleReducer.userData.deviceGroupId)\r\n    const playlists = useSelector(state => {\r\n        const dataRaw = state.scheduleReducer.playlists\r\n        const data = dataRaw.map(d => <option key={d.id} value={d.id}>{d.name}</option>)\r\n\r\n        return data\r\n    })\r\n    const devicegroups = useSelector(state => {\r\n        const dataRaw = state.scheduleReducer.deviceGroups\r\n        const data = dataRaw.map(d => <option key={d.id} value={d.id}>{d.name}</option>)\r\n\r\n        return data\r\n    })\r\n    const form = useSelector(state => state.scheduleReducer.addForm)\r\n\r\n    const loadHandler = useCallback(() => {\r\n        dispatch(shedulesGetDeviceGroups(deviceGroupId))\r\n        dispatch(shedulesGetPlaylists())\r\n        dispatch(schedulesSetIsSucceed(false))\r\n    }, [dispatch, deviceGroupId])\r\n\r\n    const changeHandler = useCallback((e) => {\r\n        dispatch(scheduleSetAddForm(e.target.name, e.target.value))\r\n    }, [dispatch])\r\n\r\n    const createHandler = useCallback(() => {\r\n        if (!form.playlist_id){\r\n            message(\"Ошибка: не задан плейлист\")\r\n            return\r\n        }\r\n        if (!form.devices_id){\r\n            message(\"Ошибка: не задана группа устройств\")\r\n            return\r\n        }\r\n        if (!form.time_start){\r\n            message(\"Ошибка: не задано время начала\")\r\n            return\r\n        }\r\n        if (!form.time_end){\r\n            message(\"Ошибка: не задано время завершения\")\r\n            return\r\n        }\r\n\r\n        dispatch(schedulesAdd(form))\r\n    }, [dispatch, message, form])\r\n\r\n    useEffect(() => {loadHandler()}, [loadHandler])\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Создание новой записи в расписании</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading &&\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s3\">\r\n                            <span>Время начала</span>\r\n                            <div className=\"row\" style={{paddingLeft: \"12px\"}}>\r\n                                <input type=\"time\" id=\"time_start\" name=\"time_start\" onChange={changeHandler}></input>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"input-field col s3 offset-s1\">\r\n                            <span>Время завершения</span>\r\n                            <div className=\"row\" style={{paddingLeft: \"12px\"}}>\r\n                                <input type=\"time\" id=\"time_end\" name=\"time_end\" onChange={changeHandler}></input>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col s12\">\r\n                            <label>Плейлист</label>\r\n                            <select defaultValue=\"\" name=\"playlist_id\" className=\"browser-default\" onChange={changeHandler}>\r\n                                <option value=\"\" disabled>Выберите плейлист</option>\r\n                                {playlists}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col s12\">\r\n                            <label>Группа устройств</label>\r\n                            <select defaultValue=\"\" name=\"devices_id\" className=\"browser-default\" onChange={changeHandler}>\r\n                                <option value=\"\" disabled>Выберите группу устройств</option>\r\n                                {devicegroups}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n            {isSucceed && <Redirect key=\"redirect\" to=\"/schedules\" />}\r\n\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { \r\n    schedulesSetIsSucceed,\r\n    schedulesSetUpdateForm,\r\n    schedulesUpdate\r\n} from \"../../store/actionCreators/scheduleActionCreator\"\r\n\r\nexport const ScheduleEditPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const form = useSelector(state => state.scheduleReducer.updateForm)\r\n    const isSucceed = useSelector(state => state.scheduleReducer.isSucceed)\r\n    const id = useSelector(state => state.scheduleReducer.currentScheduleId)\r\n\r\n    const initializeHandler = useCallback( () => {\r\n        dispatch(schedulesSetIsSucceed(false))\r\n    }, [dispatch])\r\n\r\n    const changeHandler = useCallback((e) => {\r\n        dispatch(schedulesSetUpdateForm(e.target.name, e.target.value))\r\n    }, [dispatch])\r\n\r\n    const saveHandler = useCallback(() => {\r\n        if (!form.time_start && !form.time_end) {\r\n            dispatch(schedulesSetIsSucceed(true))\r\n            return\r\n        }\r\n        \r\n        dispatch(schedulesUpdate(form, id))\r\n    }, [dispatch, form, id])\r\n\r\n    useEffect(() => { initializeHandler() }, [initializeHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Изменение расписания</h1>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s3\">\r\n                            <span>Время начала</span>\r\n                            <div className=\"row\" style={{paddingLeft: \"12px\"}}>\r\n                                <input type=\"time\" id=\"time_start\" name=\"time_start\" onChange={changeHandler}></input>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"input-field col s3 offset-s1\">\r\n                            <span>Время завершения</span>\r\n                            <div className=\"row\" style={{paddingLeft: \"12px\"}}>\r\n                                <input type=\"time\" id=\"time_end\" name=\"time_end\" onChange={changeHandler}></input>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={saveHandler}>Сохранить</button>\r\n                </div>\r\n            </div>\r\n\r\n            {isSucceed && <Redirect to=\"/schedules\" />}\r\n\r\n        </div>\r\n    )\r\n}","export const USERGROUP_SET_GROUPS = \"USERGROUP_SET_GROUPS\"\r\nexport const USERGROUP_SET_FORM = \"USERGROUP_SET_FORM\"\r\nexport const USERGROUP_SET_DEVICE_GROUPS = \"USERGROUP_SET_DEVICE_GROUPS\"\r\nexport const USERGROUP_SET_SUCCEED = \"USERGROUP_SET_SUCCEED\"\r\nexport const USERGROUP_CLEAR_FORM = \"USERGROUP_CLEAR_FORM\"\r\nexport const USERGROUP_SET_PRELOADER = \"USERGROUP_SET_PRELOADER\"","import {\r\n  USERGROUP_SET_GROUPS,\r\n  USERGROUP_SET_FORM,\r\n  USERGROUP_SET_DEVICE_GROUPS,\r\n  USERGROUP_SET_SUCCEED,\r\n  USERGROUP_CLEAR_FORM,\r\n  USERGROUP_SET_PRELOADER\r\n} from \"../actions/usergroupActions\"\r\n\r\nexport function usergroupSetGroups(data) {\r\n  return {\r\n    type: USERGROUP_SET_GROUPS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function usergroupLoadGroups() {\r\n  return async(dispatch) => {\r\n    dispatch(usergroupSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/usergroup\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok) {\r\n      dispatch(usergroupSetGroups(data))\r\n    }\r\n\r\n    dispatch(usergroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function usergroupDeleteGroup(groupId) {\r\n  return async(dispatch) => {\r\n    dispatch(usergroupSetPreloader(true))\r\n\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/usergroup/\" + groupId, {method, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(usergroupLoadGroups())\r\n    }\r\n\r\n    dispatch(usergroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function usergroupSetForm(name, value) {\r\n  return {\r\n    type: USERGROUP_SET_FORM,\r\n    data: { name, value }\r\n  }\r\n}\r\n\r\nexport function usergroupAdd(form) {\r\n  return async(dispatch) => {\r\n    dispatch(usergroupSetPreloader(true))\r\n\r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n    const responceUsers = await fetch(\"/api/usergroup/create\", {method, body, headers})\r\n\r\n    if (responceUsers.ok) {\r\n      const methodDevice = 'PUT'\r\n      const responceGroup = await fetch(\"/api/usergroup/devicegroup\", {method: methodDevice, body, headers})\r\n      if (responceGroup.ok) {\r\n        dispatch(usergroupSetSucceed(true))\r\n        dispatch(usergroupClearForm())\r\n      }\r\n    }\r\n\r\n    dispatch(usergroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function usergroupSetDeviceGroups(data) {\r\n  return {\r\n    type: USERGROUP_SET_DEVICE_GROUPS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function usergroupLoadDeviceGroups() {\r\n  return async(dispatch) => {\r\n    dispatch(usergroupSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/devicegroup\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok) {\r\n      dispatch(usergroupSetDeviceGroups(data))\r\n    }\r\n\r\n    dispatch(usergroupSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function usergroupSetSucceed(value) {\r\n  return {\r\n    type: USERGROUP_SET_SUCCEED,\r\n    data: {isSucceed: value}\r\n  }\r\n}\r\n\r\nexport function usergroupClearForm () {\r\n  return {\r\n    type: USERGROUP_CLEAR_FORM\r\n  }\r\n}\r\n\r\nexport function usergroupSetPreloader (isLoading) {\r\n  return {\r\n    type: USERGROUP_SET_PRELOADER,\r\n    data: isLoading\r\n  }\r\n}","import React, { useCallback } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch } from \"react-redux\"\r\nimport { usergroupDeleteGroup } from \"../../store/actionCreators/usergroupActionCreator\"\r\n\r\nexport const UserGroupCard = (props) => {\r\n    const {name, id} = props\r\n    const dispatch = useDispatch()\r\n\r\n    const deleteHandler = useCallback( (e) => {\r\n        dispatch(usergroupDeleteGroup(id))\r\n    }, [dispatch, id])\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink \r\n                    to={\"/usergroups/\" + id} \r\n                    className=\"collection-item card\" \r\n                    style={{marginBottom: \"25px\", border: \"1px solid grey\"}}\r\n                >\r\n                    {name}\r\n                </NavLink>\r\n            </div>\r\n            <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                <i className=\"material-icons\">delete</i>\r\n            </button>\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { UserGroupCard } from \"./UserGroupCard\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { usergroupLoadGroups, usergroupSetSucceed } from \"../../store/actionCreators/usergroupActionCreator\"\r\n\r\nexport const UserGroupsPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.usergroupReducer.preloader)\r\n    const userGroups = useSelector(state => {\r\n        const dataRaw = state.usergroupReducer.userGroups\r\n        const data = dataRaw.map(g => <UserGroupCard key={g.id} name={g.name} id={g.id}/>)\r\n        return data\r\n    })\r\n\r\n    const initializeHandler = useCallback( () => {\r\n        dispatch(usergroupSetSucceed(false))\r\n        dispatch(usergroupLoadGroups())\r\n    }, [dispatch])\r\n\r\n    useEffect( () => {initializeHandler()}, [initializeHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Группы пользователей</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div>\r\n                <NavLink key=\"new\" to=\"/usergroup/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { userGroups }\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { usergroupAdd, usergroupLoadDeviceGroups, usergroupSetForm } from \"../../store/actionCreators/usergroupActionCreator\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { Preloader } from '../../components/Preloader'\r\n\r\nexport const UserGroupAddPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.usergroupReducer.preloader)\r\n    const isSucceed = useSelector(state => state.usergroupReducer.isSucceed)\r\n    const deviceGroups = useSelector(state => {\r\n        const dataRaw = state.usergroupReducer.deviceGroups\r\n        const data = dataRaw.map(d => <option name=\"devicegroupId\" key={d.id} value={d.id}>{d.name}</option>)\r\n        return data\r\n    })\r\n    const form = useSelector(state => state.usergroupReducer.addForm)\r\n\r\n    const initializeHandler = useCallback( () => {\r\n        dispatch(usergroupLoadDeviceGroups())\r\n    }, [dispatch])\r\n\r\n    const changeHandler = useCallback( (e) => {\r\n        dispatch(usergroupSetForm(e.target.name, e.target.value))\r\n    }, [dispatch])\r\n\r\n    const createHandler = useCallback( (e) => {\r\n        if (!form.name) {\r\n            message(\"Ошибка: не задано название группы\")\r\n            return\r\n        }\r\n        if (!form.devicegroupId) {\r\n            message(\"Ошибка: не задана группа устройств\")\r\n            return\r\n        }\r\n        dispatch(usergroupAdd(form))\r\n    }, [dispatch, message, form])\r\n\r\n    useEffect( () => {initializeHandler()}, [initializeHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Создание новой группы пользователей</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading &&\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"name\" name=\"name\" type=\"text\" className=\"validate\" onChange={changeHandler} />\r\n                            <label htmlFor=\"name\">Название группы</label>\r\n                            <select defaultValue=\"0\" className=\"col browser-default\" name=\"devicegroupId\" onChange={changeHandler}>\r\n                                <option value=\"0\" disabled>Выберите группу устройств</option>\r\n                                {deviceGroups}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n            {isSucceed && <Redirect to=\"/usergroups\" />}\r\n\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { videoDeleteVideo, videoSetCurrentVideo, videoSetUserLevel } from \"../../store/actionCreators/videoActionCreator\"\r\nconst jwt = require('jsonwebtoken')\r\n\r\nexport const VideoCard = (props) => {\r\n    const {name, id, link, source} = props\r\n\r\n    let proxy = window.location.origin + ':80/stat/';\r\n    if (process.env.NODE_ENV === 'development'){\r\n        proxy = \"http://localhost:5000/stat/\"\r\n    }\r\n    \r\n    const dispatch = useDispatch()\r\n\r\n    const level = useSelector(state => state.videoReducer.userLevel)\r\n\r\n    const clickHandler = useCallback( () => {\r\n        let finalLink\r\n        if (source === \"static\")\r\n            finalLink = proxy + link\r\n        else\r\n            finalLink = link \r\n\r\n        dispatch(videoSetCurrentVideo(id, name, finalLink, source))\r\n    }, [dispatch, id, name, link, source, proxy])\r\n\r\n    const deleteHandler = useCallback( () => {\r\n        dispatch(videoDeleteVideo(id))\r\n    }, [dispatch, id])\r\n\r\n    useEffect( () => {\r\n        const token = JSON.parse(localStorage.getItem('userData')).token\r\n        const data = jwt.decode(token)\r\n\r\n        if (data) {\r\n            dispatch(videoSetUserLevel(data.level))\r\n        } else {\r\n            dispatch(videoSetUserLevel('неизвестно'))\r\n        }\r\n    }, [dispatch])\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink \r\n                    to={\"/video/\" + id} \r\n                    className=\"collection-item card\" \r\n                    style={{marginBottom: \"25px\", border: \"1px solid grey\"}}\r\n                    onClick={clickHandler}\r\n                >\r\n                    {name}\r\n                </NavLink>\r\n            </div>\r\n            {   (level === 1 || level === 2) && \r\n                <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                    <i className=\"material-icons\">delete</i>\r\n                </button>\r\n            }\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { VideoCard } from \"./VideoCard\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { videoLoadVideos, videoSetSucceed } from \"../../store/actionCreators/videoActionCreator\"\r\n\r\nexport const VideosPage = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.videoReducer.preloader)\r\n    const videos = useSelector(state => {\r\n        const videosRaw = state.videoReducer.videos\r\n        const videos = videosRaw.map(v => \r\n        <VideoCard \r\n            key={v.id} \r\n            name={v.name} \r\n            id={v.id}\r\n            link={v.link}\r\n            source={v.source}\r\n        />)\r\n        return videos\r\n    })\r\n\r\n    const initializeHandler = useCallback ( () => {\r\n        dispatch(videoLoadVideos())\r\n        dispatch(videoSetSucceed(false))\r\n    }, [dispatch])\r\n    \r\n    useEffect( () => {initializeHandler()}, [initializeHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Видео</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div>\r\n                <NavLink key=\"new\" to=\"/video/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">file_upload</i>\r\n                    <span>Загрузить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { videos }\r\n                </div>\r\n            </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useCallback } from \"react\"\r\nimport ReactPlayer from \"react-player\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { videoSetApprovedVideo, videoGetApproved } from \"../../store/actionCreators/videoActionCreator\"\r\n\r\nexport const VideoPage = (props) => {\r\n    const dispatch = useDispatch()\r\n\r\n    const name = useSelector(state => state.videoReducer.currentVideo.name)\r\n    const id = useSelector(state => state.videoReducer.currentVideo.id)\r\n    const link = useSelector(state => state.videoReducer.currentVideo.link)\r\n    const source = useSelector(state => state.videoReducer.currentVideo.source)\r\n    const isApproved = useSelector(state => state.videoReducer.currentVideo.isApproved)\r\n    \r\n    const level = useSelector(state => state.videoReducer.userLevel)\r\n\r\n    const approvingHandler = useCallback ( () => {\r\n        const currentVideo = { id, name, link, source, isApproved }\r\n        dispatch(videoSetApprovedVideo(currentVideo))\r\n    }, [dispatch, name, id, link, source, isApproved])\r\n\r\n    const initializeHandler = useCallback( () => {\r\n        dispatch(videoGetApproved(id))\r\n    }, [dispatch, id])\r\n\r\n    useEffect( () => { initializeHandler() }, [initializeHandler])\r\n\r\n    return (\r\n        <div className=\"row\" style={{ marginTop: \"10px\"}}>\r\n            <ReactPlayer url={link} controls={true}/>\r\n            <h3 className=\"video-tltle\">{name}</h3>\r\n            {!isApproved && \r\n            <div \r\n                className=\"approving-container\" \r\n                style={{display: \"flex\", flexDirection: \"row\"}}\r\n            >\r\n                <div \r\n                    className=\"approving-card\" \r\n                    style={{\r\n                        width: \"120px\", \r\n                        textAlign: \"center\", \r\n                        paddingTop: \"5px\", \r\n                        backgroundColor: \"red\",\r\n                        marginRight: \"20px\"\r\n                    }}\r\n                >\r\n                    Не одобрено\r\n                </div>\r\n                {   (level === 1 || level === 2) && \r\n                    <button className=\"approving-button btn\" onClick={approvingHandler}>Одобрить</button>\r\n                }\r\n            </div>\r\n            }\r\n\r\n            {isApproved && \r\n            <div \r\n            className=\"approving-container\" \r\n            style={{display: \"flex\", flexDirection: \"row\"}}\r\n        >\r\n            <div \r\n                className=\"approving-card\" \r\n                style={{\r\n                    width: \"120px\", \r\n                    textAlign: \"center\", \r\n                    paddingTop: \"5px\", \r\n                    paddingBottom: \"5px\", \r\n                    backgroundColor: \"green\",\r\n                    marginRight: \"20px\",\r\n                    color: \"white\"\r\n                }}\r\n            >\r\n                Одобрено\r\n            </div>\r\n        </div>}\r\n        </div>\r\n    )\r\n}","import React, { useCallback } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { videoAdd, videoSetAddForm } from \"../../store/actionCreators/videoActionCreator\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { Preloader } from '../../components/Preloader'\r\n\r\nexport const VideoAddPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.videoReducer.preloader)\r\n    const isSucceed = useSelector(state => state.videoReducer.isSucceed)\r\n    const form = useSelector(state => state.videoReducer.addVideoForm)\r\n\r\n    const changeHandler = useCallback ( (e) => {\r\n        dispatch(videoSetAddForm(e.target.name, e.target.value))\r\n    }, [dispatch])\r\n\r\n    const changeFile = useCallback ( (e) => {\r\n        dispatch(videoSetAddForm(e.target.name, e.target.files[0]))\r\n    }, [dispatch])\r\n\r\n    const createHandler = useCallback ( (e) => {\r\n        e.preventDefault()\r\n\r\n        if (!form.name) {\r\n            message(\"Ошибка: не задано имя контента\")\r\n            return\r\n        }\r\n        if (!form.filetype) {\r\n            message(\"Ошибка: не задан тип контента\")\r\n            return\r\n        } else {\r\n            switch (form.filetype){\r\n                case \"youtube\":\r\n                    if (!form.outerLink) {\r\n                        message(\"Ошибка: не задана ссылка на контент\")\r\n                        return\r\n                    }\r\n                    break\r\n                case \".mp4\":\r\n                    if (!form.file) {\r\n                        message(\"Ошибка: не указан файл\")\r\n                        return\r\n                    }\r\n                    break\r\n                default:\r\n                    return\r\n            }\r\n        }\r\n        \r\n        dispatch(videoAdd(form))\r\n    }, [dispatch, message, form])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Загрузка нового видео</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div className=\"row\">\r\n                <form className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"name\" name=\"name\" type=\"text\" className=\"validate\" onChange={changeHandler} />\r\n                            <label htmlFor=\"name\">Название видео</label>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <select defaultValue=\"\" className=\"browser-default\" name=\"filetype\" onChange={changeHandler}>\r\n                                <option value=\"\" disabled>Выберите формат файла</option>\r\n                                <option value=\".mp4\">.mp4</option>\r\n                                <option value=\"youtube\">Youtube</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    {form.filetype === \"youtube\" && <input type=\"text\" name=\"outerLink\" onChange={changeHandler} placeholder=\"Вставьте ссылку\"/>}\r\n                    {form.filetype === \".mp4\" &&\r\n                    \r\n                    <div className=\"file-field input-field\">\r\n                        <div className=\"btn\">\r\n                            <span>File</span>\r\n                            { form.filetype === \".mp4\" && <input type=\"file\" name=\"file\" accept={form.filetype} onChange={changeFile}/> }\r\n                        </div>\r\n                        <div className=\"file-path-wrapper\">\r\n                            <input className=\"file-path validate\" type=\"text\"/>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    //<span>Функция в стадии разработки</span>\r\n                    }\r\n                    {(form.filetype) && <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>}\r\n                </form>\r\n            </div>\r\n            }\r\n\r\n            {isSucceed && <Redirect to=\"/videos\" />}\r\n\r\n        </div>\r\n    )\r\n}","export const USER_SET_ADD_FORM = 'USER_SET_ADD_FORM'\r\nexport const USER_SET_SUCCEED = 'USER_SET_SUCCEED'\r\nexport const USER_SET_GROUPS = 'USER_SET_GROUPS'\r\nexport const USER_SET_CURRENT_USERNAME = 'USER_SET_CURRENT_USERNAME'\r\nexport const USER_SET_CURRENT_ID = 'USER_SET_CURRENT_ID'\r\nexport const USER_SET_CURRENT_LEVEL = 'USER_SET_CURRENT_LEVEL'\r\nexport const USER_SET_GROUP_FORM = 'USER_SET_GROUP_FORM'\r\nexport const USER_SET_USERS = 'USER_SET_USERS'\r\nexport const USER_CLEAR_ADD_FORM = 'USER_CLEAR_ADD_FORM'\r\nexport const USER_CLEAR_GROUP_FORM = 'USER_CLEAR_GROUP_FORM'\r\nexport const USER_SET_PRELOADER = 'USER_SET_PRELOADER'","import {\r\n  USER_SET_ADD_FORM,\r\n  USER_SET_SUCCEED,\r\n  USER_SET_GROUPS,\r\n  USER_SET_CURRENT_USERNAME,\r\n  USER_SET_CURRENT_ID,\r\n  USER_SET_CURRENT_LEVEL,\r\n  USER_SET_GROUP_FORM,\r\n  USER_SET_USERS,\r\n  USER_CLEAR_ADD_FORM,\r\n  USER_CLEAR_GROUP_FORM,\r\n  USER_SET_PRELOADER\r\n} from \"../actions/userActions\"\r\n\r\nexport function userSetAddForm(name, value){\r\n  return {\r\n    type: USER_SET_ADD_FORM,\r\n    data: {name, value}\r\n  }\r\n}\r\n\r\nexport function userAdd(form){\r\n  return async(dispatch) => {\r\n    dispatch(userSetPreloader(true))\r\n    \r\n    const method = 'POST'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n    const responce = await fetch(\"/api/user/registration\", {method, body, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(userSetSucceed(true))\r\n      dispatch(userClearAddForm())\r\n    }\r\n\r\n    dispatch(userSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function userSetSucceed(data){\r\n  return {\r\n    type: USER_SET_SUCCEED,\r\n    data\r\n  }\r\n}\r\n\r\nexport function userSetGroups(data) {\r\n  return {\r\n    type: USER_SET_GROUPS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function userLoadGroup() {\r\n  return async(dispatch) => {\r\n    dispatch(userSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/usergroup\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok) {\r\n      dispatch(userSetGroups(data))\r\n    }\r\n\r\n    dispatch(userSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function userSetCurrentUsername(username) {\r\n  return {\r\n    type: USER_SET_CURRENT_USERNAME,\r\n    data: username\r\n  }\r\n}\r\n\r\nexport function userSetCurrentId(userId) {\r\n  return {\r\n    type: USER_SET_CURRENT_ID,\r\n    data: userId\r\n  }\r\n}\r\n\r\nexport function userSetCurrentLevel(userLevel) {\r\n  return {\r\n    type: USER_SET_CURRENT_LEVEL,\r\n    data: userLevel\r\n  }\r\n}\r\n\r\nexport function userSetGroupsForm(name, value){\r\n  return {\r\n    type: USER_SET_GROUP_FORM,\r\n    data: {name, value}\r\n  }\r\n}\r\n\r\nexport function userSetGroup(form, userId) {\r\n  return async(dispatch) => {\r\n    dispatch(userSetPreloader(true))\r\n\r\n    const method = 'PUT'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const body = JSON.stringify({...form})\r\n    const responce = await fetch(\"/api/user/setgroup/\" + userId, {method, body, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(userSetSucceed(true))\r\n      dispatch(userClearGroupForm())\r\n    }\r\n\r\n    dispatch(userSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function userSetUsers(data) {\r\n  return {\r\n    type: USER_SET_USERS,\r\n    data\r\n  }\r\n}\r\n\r\nexport function userLoadUsers() {\r\n  return async(dispatch) => {\r\n    dispatch(userSetPreloader(true))\r\n\r\n    const method = 'GET'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/user\", {method, headers})\r\n\r\n    const data = await responce.json()\r\n    if (responce.ok) {\r\n      dispatch(userSetUsers(data))\r\n    }\r\n\r\n    dispatch(userSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function userDeleteUser(userId) {\r\n  return async(dispatch) => {\r\n    dispatch(userSetPreloader(true))\r\n\r\n    const method = 'DELETE'\r\n    const headers = {'Content-Type': 'application/json'}\r\n    const responce = await fetch(\"/api/user/\" + userId, {method, headers})\r\n\r\n    if (responce.ok) {\r\n      dispatch(userLoadUsers())\r\n    }\r\n\r\n    dispatch(userSetPreloader(false))\r\n  }\r\n}\r\n\r\nexport function userClearAddForm () {\r\n  return {\r\n    type: USER_CLEAR_ADD_FORM\r\n  }\r\n}\r\n\r\nexport function userClearGroupForm () {\r\n  return {\r\n    type: USER_CLEAR_GROUP_FORM\r\n  }\r\n}\r\n\r\nexport function userSetPreloader (isLoading) {\r\n  return {\r\n    type: USER_SET_PRELOADER,\r\n    data: isLoading\r\n  }\r\n}\r\n\r\n","import React, { useCallback, useEffect, useState } from \"react\"\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useDispatch} from \"react-redux\"\r\nimport { \r\n    userDeleteUser,\r\n    userSetCurrentId, \r\n    userSetCurrentLevel, \r\n    userSetCurrentUsername \r\n} from \"../../store/actionCreators/userActionCreator\"\r\n\r\nexport const UserCard = (props) => {\r\n    const {username, id, level, usergroup} = props\r\n    const [levelName, setLevelName] = useState('неизвестно')\r\n    const [usergroupOutput, setUserGroupOutput] = useState('')\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const clickHandler = useCallback(() => {\r\n        dispatch(userSetCurrentId(id))\r\n        dispatch(userSetCurrentUsername(username))\r\n        dispatch(userSetCurrentLevel(level))\r\n    }, [dispatch, id, level, username])\r\n\r\n    const deleteHandler = useCallback(() => {\r\n        dispatch(userDeleteUser(id))\r\n    }, [dispatch, id])\r\n    \r\n\r\n    useEffect( () => {\r\n        switch(level) {\r\n            case 0:\r\n                setLevelName('Пользователь')\r\n                setUserGroupOutput('Пользователь')\r\n                break\r\n            case 1:\r\n                setLevelName('Модератор')\r\n                setUserGroupOutput(usergroup)\r\n                break\r\n            case 2:\r\n                setLevelName('Администратор')\r\n                setUserGroupOutput('Администратор')\r\n                break\r\n            default:\r\n                setLevelName('Неизвестно')\r\n                setUserGroupOutput('Неизвестно')\r\n        }\r\n    }, [level, usergroup])\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col s10\">\r\n                <NavLink \r\n                    to={\"/user/\" + id} \r\n                    className=\"collection-item card\" \r\n                    style={{marginBottom: \"25px\", border: \"1px solid grey\"}}\r\n                >\r\n                    {username}<br/>\r\n                    Тип: {levelName}<br />\r\n                    Группа пользователей: {usergroupOutput}\r\n                </NavLink>\r\n            </div>\r\n\r\n            <NavLink className=\"btn\" to={\"/user/edit/\" + id} onClick={clickHandler} style={{marginRight: \"10px\"}}>\r\n                <i className=\"material-icons\">edit</i>\r\n            </NavLink>\r\n\r\n            <button name={id} className=\"btn\" onClick={deleteHandler}>\r\n                <i className=\"material-icons\">delete</i>\r\n            </button>\r\n        </div>\r\n        \r\n    )\r\n}","import React, { useCallback, useEffect, useState } from \"react\"\r\nimport { NavLink } from \"react-router-dom\"\r\nimport { UserCard } from \"./UserCard\"\r\nimport { Preloader } from '../../components/Preloader'\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { userLoadUsers, userSetSucceed } from \"../../store/actionCreators/userActionCreator\"\r\nimport { Pagination } from \"../../components/Pagination\"\r\n\r\nexport const UsersPage = () => {\r\n    const dispatch = useDispatch()\r\n    const [activePage, setActivePage] = useState(1)\r\n    const [minValue, setMinValue] = useState(1)\r\n    //const [maxValue, setMaxValue] = useState(5)\r\n    const [isFirst, setisFirst] = useState(true)\r\n    const [isLast, setIsLast] = useState(false)\r\n    const [totalPages, setTotalPages] = useState(5)\r\n    \r\n    \r\n    const loading = useSelector(state => state.userReducer.preloader)\r\n    const users = useSelector(state => {\r\n        const usersRaw = state.userReducer.users\r\n        const users = usersRaw.map(u => {\r\n            let result\r\n            (u.usergroup && u.usergroup.name)\r\n            ?   result = <UserCard key={u.id} username={u.username} id={u.id} level={u.level} usergroup={u.usergroup.name}/>\r\n            :   result = <UserCard key={u.id} username={u.username} id={u.id} level={u.level} usergroup={\"Неизвестно\"}/>\r\n\r\n            return result\r\n        })\r\n        return users\r\n    })\r\n\r\n\r\n    const paginationClickHandler = useCallback( (newValue) => {\r\n        setActivePage(newValue)\r\n        newValue === '1' ? setisFirst(true) : setisFirst(false)\r\n        newValue === totalPages+'' ? setIsLast(true) : setIsLast(false)\r\n\r\n\r\n        console.log(\"click\");\r\n    }, [setActivePage, totalPages])\r\n\r\n    const initializeHandler = useCallback( () => {\r\n        dispatch(userLoadUsers())\r\n        dispatch(userSetSucceed(false))\r\n    }, [dispatch])\r\n\r\n    useEffect(() => { initializeHandler() }, [initializeHandler])\r\n    \r\n    /*\r\n    return (\r\n        <div className=\"row\">\r\n            <h1>Пользователи</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div>\r\n                <NavLink key=\"new\" to=\"/user/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { loading && <div key=\"devgroup_loader\" className=\"progress\"><div className=\"indeterminate\"></div></div> }\r\n                    { users }\r\n                </div>\r\n                <Pagination \r\n                    active={activePage}\r\n                    minValue={minValue}\r\n                    maxValue={totalPages}\r\n                    isFirst={isFirst}\r\n                    isLast={isLast}\r\n                    changeHandler={paginationClickHandler}\r\n                />\r\n            </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n    */\r\n    \r\n    return (\r\n        <div className=\"row\">\r\n            <h1>Пользователи</h1>\r\n\r\n            { loading && <Preloader />}\r\n\r\n            { !loading && \r\n            <div>\r\n                <NavLink key=\"new\" to=\"/user/add\" className=\"waves-effect waves-light btn\" style={{display: \"flex\", width: '130px'}}>\r\n                    <i className=\"material-icons\">add</i>\r\n                    <span>Добавить</span>\r\n                </NavLink>\r\n                <div className=\"collection\" style={{border: \"0px\"}}>\r\n                    { loading && <div key=\"devgroup_loader\" className=\"progress\"><div className=\"indeterminate\"></div></div> }\r\n                    { users }\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n        </div>\r\n    )\r\n}","import React, { useCallback } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { userSetAddForm, userAdd } from \"../../store/actionCreators/userActionCreator\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\n\r\nexport const UserAddPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const isSucceed = useSelector(state => state.userReducer.isSucceed)\r\n    const form = useSelector(state => state.userReducer.addForm)\r\n\r\n    const changeHandler = useCallback( (e) => {\r\n        dispatch(userSetAddForm(e.target.name, e.target.value))\r\n    }, [dispatch])\r\n\r\n    const createHandler = useCallback( () => {\r\n        if (!form.username){\r\n            message(\"Ошибка: не задано имя пользователя\")\r\n            return\r\n        }\r\n        if (!form.password){\r\n            message(\"Ошибка: не задан пароль\")\r\n            return\r\n        }\r\n\r\n        dispatch(userAdd(form))\r\n    }, [dispatch, message, form])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Создание нового пользователя</h1>\r\n\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"username\" name=\"username\" type=\"text\" className=\"validate\" onChange={changeHandler} />\r\n                            <label htmlFor=\"username\">Имя пользователя</label>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"input-field col s6\">\r\n                            <input id=\"password\" name=\"password\" type=\"text\" onChange={changeHandler} />\r\n                            <label htmlFor=\"password\">Пароль</label>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <select defaultValue=\"-1\" className=\"col s6 browser-default\" name=\"level\" onChange={changeHandler}>\r\n                            <option value=\"-1\" disabled>Выберите уровень доступа</option>\r\n                            <option value=\"0\">Обычный пользователь</option>\r\n                            <option value=\"1\">Модератор</option>\r\n                            <option value=\"2\">Администратор</option>\r\n                        </select>\r\n                    </div>\r\n                    <button className=\"btn blue-grey darken-1\" onClick={createHandler}>Создать</button>\r\n                </div>\r\n            </div>\r\n\r\n            {isSucceed && <Redirect to=\"/users\" />}\r\n\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useEffect } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { useDispatch, useSelector } from \"react-redux\"\r\nimport { userLoadGroup, userSetGroup, userSetGroupsForm } from \"../../store/actionCreators/userActionCreator\"\r\nimport { useMessage } from \"../../hooks/message.hook\"\r\nimport { Preloader } from '../../components/Preloader'\r\n\r\nexport const UserSetGroupPage = () => {\r\n    const message = useMessage()\r\n    const dispatch = useDispatch()\r\n\r\n    const loading = useSelector(state => state.userReducer.preloader)\r\n    const isSucceed = useSelector(state => state.userReducer.isSucceed)\r\n    const userGroups = useSelector(state => {\r\n        const dataRaw = state.userReducer.userGroups\r\n        const data = dataRaw.map(g => <option key={g.id} value={g.id}>{g.name}</option>)\r\n\r\n        return data\r\n    })\r\n    const username = useSelector(state => state.userReducer.currentUsername)\r\n    const id = useSelector(state => state.userReducer.currentUserId)\r\n    const level = useSelector(state => state.userReducer.currentUserLevel)\r\n    const form = useSelector(state => state.userReducer.groupForm)\r\n\r\n\r\n    const initializeHandler = useCallback(() => {\r\n        dispatch(userLoadGroup())\r\n    }, [dispatch])\r\n\r\n    const changeHandler = useCallback((e) => {\r\n        dispatch(userSetGroupsForm(e.target.name, e.target.value))\r\n    }, [dispatch])\r\n\r\n    const saveHandler = useCallback(() => {\r\n        if (!form.group_id){\r\n            message(\"Ошибка: не задана группа пользователей\")\r\n            return\r\n        }\r\n        dispatch(userSetGroup(form, id))\r\n    }, [dispatch, message, form, id])\r\n\r\n    useEffect( () => { initializeHandler() }, [initializeHandler])\r\n\r\n    return (\r\n        <div>\r\n            <h1>Изменение группы пользователя</h1>\r\n\r\n            { loading && <Preloader /> }\r\n\r\n            { !loading && \r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    <span>Имя пользователя: {username}</span>\r\n                    {   level === 1 &&\r\n                        <div className=\"row\">\r\n                            <select defaultValue=\"\" className=\"col s6 browser-default\" name=\"group_id\" onChange={changeHandler}>\r\n                                <option value=\"\" disabled>Выберите группу пользователей</option>\r\n                                {userGroups}\r\n                            </select>\r\n                        </div>\r\n                    }\r\n                    {   level !== 1 && \r\n                        <div className=\"row\">\r\n                            <span className=\"col s6\">Внимание! Данному пользователю нельзя присвоить группу</span>\r\n                        </div>\r\n                    }\r\n                    \r\n                    {   level === 1 &&\r\n                        <button className=\"btn blue-grey darken-1\" onClick={saveHandler}>Сохранить</button>\r\n                    }\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n            {isSucceed && <Redirect to=\"/users\" />}\r\n\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState, useCallback } from \"react\"\r\nimport ReactPlayer from \"react-player\"\r\nimport { useHttp } from \"../../hooks/http.hook\"\r\nimport { useParams } from \"react-router\"\r\n\r\nexport const WatchPage = (props) => {\r\n\r\n  let proxy = window.location.origin + ':80/stat/';\r\n  if (process.env.NODE_ENV === 'development'){\r\n      proxy = \"http://localhost:5000/stat/\"\r\n  }\r\n\r\n  const plug = 'plug.mp4'\r\n  const { link } = useParams()\r\n  const {request} = useHttp()\r\n  const [currentVideo, setCurrentVideo] = useState(0)\r\n  const [playlist, setPlaylist] = useState(null)\r\n  const [isLoaded, setIsLoaded] = useState(false)\r\n  const [timeEnd, setTimeEnd] = useState(null)\r\n\r\n  \r\n  const initHandler = useCallback( async () => {\r\n    try {\r\n      setIsLoaded(false)\r\n\r\n      const data = await request('/api/playlist/contentlink/' + link, 'GET')\r\n\r\n      if (data && data.content) {\r\n        const links = data.content.map(v => v.content.source === 'static' ? proxy + v.content.link : v.content.link)\r\n\r\n        const timeEnd = new Date(data.timeEnd)\r\n\r\n        setPlaylist(links)\r\n        setTimeEnd(timeEnd)\r\n        setIsLoaded(true)\r\n      } else {\r\n        const links = [proxy + plug];\r\n        const timeEnd = new Date(data.timeEnd)\r\n        setPlaylist(links)\r\n        setTimeEnd(timeEnd)\r\n        setIsLoaded(true)\r\n      }\r\n    } catch (e) {}\r\n  }, [request, link])\r\n\r\n  const endVideoHandler = () => {\r\n    const now = new Date()\r\n    if (timeEnd < now)\r\n      initHandler()\r\n    else {\r\n\r\n      if (playlist.length === 1) {\r\n        setIsLoaded(false)\r\n        setIsLoaded(true)\r\n      } else \r\n        (currentVideo + 1) === playlist.length ? setCurrentVideo(0) : setCurrentVideo(currentVideo + 1)\r\n    }\r\n  }\r\n\r\n  useEffect( () => { initHandler() }, [initHandler])\r\n\r\n  return (\r\n    <div className='player-wrapper' style={\r\n        {\r\n          position: \"absolute\", \r\n          top: '0px', \r\n          left: '0px', \r\n          right: '0px', \r\n          bottom: '0px',\r\n          backgroundColor: 'rgb(66,66,66)',\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n          alignItems: 'center'\r\n        }\r\n      }\r\n    >\r\n      {isLoaded &&\r\n      <ReactPlayer \r\n        url={playlist[currentVideo]} \r\n        playing='true'\r\n        controls='true'\r\n        width='100vw'\r\n        height='100vh'\r\n        onEnded={endVideoHandler}\r\n      />}\r\n      {!isLoaded && \r\n      <span>Загрузка...</span>}\r\n    </div>\r\n\r\n  )\r\n}","import React, { useContext } from 'react'\r\nimport { NavLink, useHistory } from 'react-router-dom'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nexport const Navbar = () => {\r\n    const history = useHistory()\r\n    const auth = useContext(AuthContext)\r\n\r\n    const logoutHandler = event => {\r\n        event.preventDefault()\r\n        auth.logout()\r\n        history.push('/')\r\n    }\r\n\r\n    \r\n    return (\r\n        <nav className=\"nav-extended\">\r\n            <div className=\"nav-wrapper blue-grey darken-1\" style={{paddingLeft: \"100px\", paddingRight: \"100px\"}}>\r\n                <NavLink to=\"/\" className=\"brand-logo\">NSTU-BS</NavLink>\r\n\r\n                <a href=\"/\" data-target=\"mobile-demo\" className=\"sidenav-trigger right\">\r\n                    <i className=\"material-icons\">logout</i>\r\n                </a>\r\n                \r\n                <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\r\n                    <li><NavLink to=\"/cabinet\">Личный кабинет</NavLink></li>\r\n                    <li>\r\n                        <a href=\"/\" onClick={logoutHandler} style={{display:\"flex\"}}>\r\n                            <i className=\"material-icons\" style={{marginRight: \"10px\"}}>logout</i>\r\n                            <span>Выход</span>\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n\r\n            </div>\r\n        </nav>\r\n    )\r\n    \r\n    \r\n}","import React from \"react\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nexport const HeadTag = () => {\r\n    return (\r\n        <Helmet>\r\n            <title>NSTU BS</title>\r\n            <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\"></link>\r\n        </Helmet>\r\n    )\r\n}","import { BrowserRouter as Router } from 'react-router-dom';\r\nimport { useAuth } from './hooks/auth.hook';\r\nimport { useRoutes } from './routes';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport { Navbar } from './components/Navbar';\r\nimport 'materialize-css'\r\nimport \"../node_modules/video-react/dist/video-react.css\"\r\nimport { HeadTag } from './components/HeadTag';\r\n\r\nfunction App() {\r\n  const {token, login, logout} = useAuth()\r\n  const isAutheticated = !!token\r\n  const routes =  useRoutes(isAutheticated)\r\n\r\n  return (\r\n    <AuthContext.Provider value={{token, login, logout, isAutheticated}}>\r\n      <Router>\r\n        <HeadTag />\r\n        { isAutheticated && <Navbar /> }\r\n\r\n        <div className=\"\">\r\n          {routes}\r\n        </div>\r\n      </Router>\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\"\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport { Sidebar } from \"./components/Sidebar\"\r\nimport { AuthPage } from \"./pages/Auth/AuthPage\"\r\nimport { CabinetPage } from \"./pages/Cabinet/CabinetPage\"\r\nimport { DeviceGroupsPage } from \"./pages/DeviceGroup/DeviceGroupsPage\"\r\nimport { DeviceGroupAddPage } from \"./pages/DeviceGroup/DeviceGroupAddPage\"\r\nimport { PlaylistsPage } from \"./pages/Playlist/PlaylistsPage\"\r\nimport { PlaylistPage } from \"./pages/Playlist/PlaylistPage\"\r\nimport { PlaylistAddPage } from \"./pages/Playlist/PlaylistAddPage\"\r\nimport { PlaylistAddContentPage } from \"./pages/Playlist/PlaylistAddContentPage\"\r\nimport { SchedulesPage } from \"./pages/Schedule/SchedulesPage\"\r\nimport { ScheduleAddPage } from \"./pages/Schedule/ScheduleAddPage\"\r\nimport { ScheduleEditPage } from \"./pages/Schedule/ScheduleEditPage\"\r\nimport { UserGroupsPage } from \"./pages/UserGroup/UserGroupsPage\"\r\nimport { UserGroupAddPage } from \"./pages/UserGroup/UserGroupAddPage\"\r\nimport { VideosPage } from \"./pages/Video/VideosPage\"\r\nimport { VideoPage } from \"./pages/Video/VideoPage\"\r\nimport { VideoAddPage } from \"./pages/Video/VideoAddPage\"\r\nimport { UsersPage } from \"./pages/User/UsersPage\"\r\nimport { UserAddPage } from \"./pages/User/UserAddPage\"\r\nimport { UserSetGroupPage } from \"./pages/User/UserSetGroupPage\"\r\nimport { WatchPage } from \"./pages/Watch/WatchPage\"\r\n\r\nexport const useRoutes = isAutheticated => {\r\n    if (isAutheticated) {\r\n        return (\r\n            <div className=\"row\">\r\n                <Sidebar />\r\n\r\n                <div className=\"col s9 m9 l9 xl9\">\r\n                    <Switch>\r\n                        <Route path=\"/\" exact>\r\n                            <CabinetPage />\r\n                        </Route>\r\n                        <Route path=\"/videos\" exact>\r\n                            <VideosPage />\r\n                        </Route>\r\n                        <Route path=\"/video/add\" exact>\r\n                            <VideoAddPage />\r\n                        </Route>\r\n                        <Route path=\"/video/:id\" exact>\r\n                            <VideoPage />\r\n                        </Route>\r\n                        <Route path=\"/playlists\" exact>\r\n                            <PlaylistsPage />\r\n                        </Route>\r\n                        <Route path=\"/playlists/:id\" exact>\r\n                            <PlaylistPage />\r\n                        </Route>\r\n                        <Route path=\"/playlist/addcontent/:id\" exact>\r\n                            <PlaylistAddContentPage />\r\n                        </Route>\r\n                        <Route path=\"/playlist/add\" exact>\r\n                            <PlaylistAddPage />\r\n                        </Route>\r\n                        <Route path=\"/schedules\" exact>\r\n                            <SchedulesPage />\r\n                        </Route>\r\n                        <Route path=\"/schedule/add\" exact>\r\n                            <ScheduleAddPage />\r\n                        </Route>\r\n                        <Route path=\"/schedule/edit/:id\" exact>\r\n                            <ScheduleEditPage />\r\n                        </Route>\r\n                        <Route path=\"/devicegroups\" exact>\r\n                            <DeviceGroupsPage />\r\n                        </Route>\r\n                        <Route path=\"/devicegroup/add\" exact>\r\n                            <DeviceGroupAddPage />\r\n                        </Route>\r\n                        <Route path=\"/usergroups\" exact>\r\n                            <UserGroupsPage />\r\n                        </Route>\r\n                        <Route path=\"/usergroup/add\" exact>\r\n                            <UserGroupAddPage />\r\n                        </Route>\r\n                        <Route path=\"/users\" exact>\r\n                            <UsersPage />\r\n                        </Route>\r\n                        <Route path=\"/user/add\" exact>\r\n                            <UserAddPage />\r\n                        </Route>\r\n                        <Route path=\"/user/edit/:id\" exact>\r\n                            <UserSetGroupPage />\r\n                        </Route>\r\n                        <Route path=\"/watch/:link\" exact>\r\n                            <WatchPage />\r\n                        </Route>\r\n                        <Redirect to=\"/\" />\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route path=\"/\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n            <Route path=\"/watch/:link\" exact>\r\n                <WatchPage />\r\n            </Route>\r\n            <Redirect to=\"/\" />\r\n        </Switch>\r\n    )\r\n}","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {\r\n  DEVICE_GROUP_SET_SUCCEED, \r\n  DEVICE_GROUP_SET_FORM, \r\n  DEVICE_GROUP_SET_GROUPS,\r\n  DEVICE_GROUP_CLEAR_FORM,\r\n  DEVICE_GROUP_SET_PRELOADER\r\n} from '../actions/deviceGroupActions'\r\n\r\nconst initialState = {\r\n  isSucceed: false,\r\n  form: {\r\n    name: '',\r\n    link: ''\r\n  },\r\n  deviceGroups: [],\r\n  preloader: false\r\n}\r\n\r\n\r\nfunction deviceGroupReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case DEVICE_GROUP_SET_SUCCEED: {\r\n      return {...state, isSucceed: action.data}\r\n    }\r\n    case DEVICE_GROUP_SET_FORM:{\r\n      const newForm = {...state.form, [action.data.target]: action.data.value}\r\n      const result = {...state, form: newForm}\r\n      return result\r\n    }\r\n    case DEVICE_GROUP_SET_GROUPS: {\r\n      return {...state, deviceGroups: action.data}\r\n    }\r\n    case DEVICE_GROUP_CLEAR_FORM: {\r\n      return {...state, form: initialState.form}\r\n    }\r\n    case DEVICE_GROUP_SET_PRELOADER: {\r\n      return {...state, preloader: action.data}\r\n    }\r\n    default: return state\r\n  }\r\n}\r\n\r\nexport default deviceGroupReducer","import {\r\n  AUTH_SET_FORM,\r\n  AUTH_CLEAR_FORM\r\n} from '../actions/authActions'\r\n\r\nconst initialState = {\r\n  form: {\r\n    username: '',\r\n    password: ''\r\n  }\r\n}\r\n\r\nfunction authReducer (state = initialState, action) {\r\n  switch(action.type) {\r\n    case AUTH_SET_FORM: {\r\n      const newForm = {...state.form, [action.data.target]: action.data.value}\r\n      const result = {...state, form: newForm}\r\n      return result\r\n    }\r\n\r\n    case AUTH_CLEAR_FORM: {\r\n      return {...state, form: initialState.form}\r\n    }\r\n\r\n    default: \r\n      return state\r\n  }\r\n}\r\n\r\nexport default authReducer","import {\r\n  CABINET_SET_DATA\r\n} from '../actions/cabinetActions'\r\nconst jwt = require('jsonwebtoken')\r\n\r\nconst initialState = {\r\n  token: '',\r\n  username: 'Неизвестно',\r\n  level: 0,\r\n  levelName: 'Неизвестно'\r\n}\r\n\r\nfunction cabinetReducer(state = initialState, action) {\r\n  switch(action.type){\r\n    case CABINET_SET_DATA: {\r\n      const token = action.token;\r\n      const data = jwt.decode(token)\r\n      let username = \"Неизвестно\"\r\n      let level = -1\r\n      let levelName = \"Неизвестно\"\r\n\r\n      if (data && data.username)\r\n        username = data.username\r\n\r\n      if (data && data.level)\r\n        level = data.level\r\n\r\n      switch (level){\r\n        case 0: \r\n          levelName = \"Пользователь\"\r\n          break\r\n        case 1: \r\n          levelName = \"Модератор\"\r\n          break\r\n        case 2:\r\n          levelName = \"Администратор\"\r\n          break\r\n\r\n        default:\r\n          levelName = \"Неизвестно\"\r\n      }\r\n\r\n      return {...state, token, username, level, levelName}\r\n    }\r\n\r\n    default: {\r\n      return state\r\n    }\r\n  }\r\n}\r\n\r\nexport default cabinetReducer","import {\r\n  PLAYLIST_NEW_SET_SUCCEED, \r\n  PLAYLIST_NEW_SET_FORM,\r\n  PLAYLIST_SET_ALL,\r\n  PLAYLIST_SET_CURRENT,\r\n  PLAYLIST_SET_CONTENT,\r\n  PLAYLIST_SET_ALL_VIDEOS,\r\n  PLAYLIST_NEW_CONTENT_FORM,\r\n  PLAYLIST_NEW_CLEAR_FORM,\r\n  PLAYLIST_NEW_CLEAR_CONTENT_FORM,\r\n  PLAYLIST_SET_PRELOADER\r\n} from '../actions/playlistActions'\r\n\r\nconst initialState = {\r\n  isSucceed: false,\r\n  form: {\r\n    name: ''\r\n  },\r\n  playlists: [],\r\n  currentPlaylistId: 0,\r\n  currentPlaylistName: '',\r\n  currentPlaylistContents: [],\r\n  addContentForm: {\r\n    content_id: 0,\r\n    position: 0\r\n  },\r\n  allVideos: [],\r\n  currentVideoId: 0,\r\n  currentVideoName: \"\",\r\n  preloader: false\r\n}\r\n\r\nfunction playlistReducer(state = initialState, action) {\r\n  \r\n  switch(action.type){\r\n    case PLAYLIST_NEW_SET_SUCCEED: {\r\n      return {...state, isSucceed: action.data}\r\n    }\r\n\r\n    case PLAYLIST_NEW_SET_FORM: {\r\n      const newForm = {...state.form, [action.data.target]: action.data.value}\r\n      const result = {...state, form: newForm}\r\n      return result\r\n    }\r\n\r\n    case PLAYLIST_SET_ALL: {\r\n      return {...state, playlists: action.data}\r\n    }\r\n\r\n    case PLAYLIST_SET_CURRENT: {\r\n      return {\r\n        ...state,\r\n        currentPlaylistName: action.data.name,\r\n        currentPlaylistId: action.data.id\r\n      }\r\n    }\r\n\r\n    case PLAYLIST_SET_CONTENT: {\r\n      return {\r\n        ...state,\r\n        currentPlaylistContents: action.data\r\n      }\r\n    }\r\n\r\n    case PLAYLIST_SET_ALL_VIDEOS: {\r\n      return {\r\n        ...state,\r\n        allVideos: action.data\r\n      }\r\n    }\r\n\r\n    case PLAYLIST_NEW_CONTENT_FORM: {\r\n      const newForm = {...state.addContentForm, [action.data.target]: action.data.value}\r\n      const result = {...state, addContentForm: newForm}\r\n      return result\r\n    }\r\n\r\n    case PLAYLIST_NEW_CLEAR_FORM: {\r\n      return {...state, form: initialState.form}\r\n    }\r\n\r\n    case PLAYLIST_NEW_CLEAR_CONTENT_FORM: {\r\n      return {...state, addContentForm: initialState.addContentForm}\r\n    }\r\n\r\n    case PLAYLIST_SET_PRELOADER: {\r\n      return {...state, preloader: action.data}\r\n    }\r\n\r\n    default: return state\r\n  }\r\n}\r\n\r\nexport default playlistReducer","import {\r\n  SCHEDULE_SET_ALL, \r\n  SCHEDULE_SET_CURRENT,\r\n  SCHEDULE_SET_PLAYLISTS,\r\n  SCHEDULE_SET_DEVICE_GROUPS,\r\n  SCHEDULE_SET_ADD_FORM,\r\n  SCHEDULE_SET_SUCCEED,\r\n  SCHEDULE_SET_UPDATE_FORM,\r\n  SCHEDULE_CLEAR_ADD_FORM,\r\n  SCHEDULE_CLEAR_UPDATE_FORM,\r\n  SCHEDULE_SET_PRELOADER,\r\n  SCHEDULE_SET_USER_DATA\r\n} from \"../actions/scheduleActions\"\r\n//const jwt = require('jsonwebtoken')\r\n\r\nconst initialState = {\r\n  schedules: [],\r\n  currentScheduleId: 0,\r\n  isSucceed: false,\r\n  deviceGroups: [],\r\n  playlists: [],\r\n  addForm: {\r\n    playlist_id: '',\r\n    devices_id: '',\r\n    time_start: '',\r\n    time_end: ''\r\n  },\r\n  updateForm: {\r\n    time_start: '',\r\n    time_end: ''\r\n  },\r\n  preloader: false,\r\n  userData: {\r\n    deviceGroupId: 0\r\n  }\r\n}\r\n\r\nfunction scheduleReducer(state = initialState, action) {\r\n  switch(action.type){\r\n    case SCHEDULE_SET_ALL: {\r\n      return {\r\n        ...state,\r\n        schedules: action.data\r\n      }\r\n    }\r\n\r\n    case SCHEDULE_SET_CURRENT: {\r\n      return {\r\n        ...state,\r\n        currentScheduleId: action.scheduleId\r\n      }\r\n    }\r\n\r\n    case SCHEDULE_SET_ADD_FORM: {\r\n      let newAddForm = {...state.addForm, [action.data.target]: action.data.value}\r\n\r\n      return {\r\n        ...state,\r\n        addForm: newAddForm\r\n      }\r\n    }\r\n\r\n    case SCHEDULE_SET_DEVICE_GROUPS: {\r\n      return {\r\n        ...state,\r\n        deviceGroups: action.data\r\n      }\r\n    }\r\n\r\n    case SCHEDULE_SET_PLAYLISTS: {\r\n      return {\r\n        ...state,\r\n        playlists: action.data\r\n      }\r\n    }\r\n\r\n    case SCHEDULE_SET_SUCCEED: {\r\n      return {\r\n        ...state,\r\n        isSucceed: action.data\r\n      }\r\n    }\r\n    \r\n    case SCHEDULE_SET_UPDATE_FORM: {\r\n      let newUpdateForm = {...state.updateForm, [action.data.target]: action.data.value}\r\n\r\n      return {\r\n        ...state,\r\n        updateForm: newUpdateForm\r\n      }\r\n    }\r\n\r\n    case SCHEDULE_CLEAR_ADD_FORM: {\r\n      return {...state, addForm: initialState.addForm}\r\n    }\r\n\r\n    case SCHEDULE_CLEAR_UPDATE_FORM: {\r\n      return {...state, updateForm: initialState.updateForm}\r\n    }\r\n\r\n    case SCHEDULE_SET_PRELOADER: {\r\n      return {...state, preloader: action.data}\r\n    }\r\n\r\n    case SCHEDULE_SET_USER_DATA: {\r\n      const newUserData = {...state.userData, [action.data.name]: action.data.value}\r\n\r\n      return {...state, userData: newUserData}\r\n    }\r\n\r\n    default: \r\n      return state\r\n  }\r\n}\r\n\r\nexport default scheduleReducer","import {\r\n  USER_SET_ADD_FORM,\r\n  USER_SET_SUCCEED,\r\n  USER_SET_GROUPS,\r\n  USER_SET_CURRENT_USERNAME,\r\n  USER_SET_CURRENT_ID,\r\n  USER_SET_CURRENT_LEVEL,\r\n  USER_SET_GROUP_FORM,\r\n  USER_SET_USERS,\r\n  USER_CLEAR_ADD_FORM,\r\n  USER_CLEAR_GROUP_FORM,\r\n  USER_SET_PRELOADER\r\n} from \"../actions/userActions\"\r\n\r\nconst initialState = {\r\n  addForm: {\r\n    username: \"\",\r\n    password: \"\",\r\n    level: 0\r\n  },\r\n  isSucceed: false,\r\n  userGroups: [],\r\n  currentUsername: \"\",\r\n  currentUserId: 0,\r\n  currentUserLevel: 0,\r\n  groupForm: {\r\n    group_id: 0\r\n  },\r\n  users: [],\r\n  preloader: false\r\n}\r\n\r\nfunction userReducer (state = initialState, action) {\r\n  switch(action.type){\r\n    case USER_SET_ADD_FORM: {\r\n      let newAddForm = {...state.addForm, [action.data.name]: action.data.value}\r\n      return { ...state, addForm: newAddForm }\r\n    }\r\n\r\n    case USER_SET_SUCCEED:\r\n      return { ...state, isSucceed: action.data }\r\n\r\n    case USER_SET_GROUPS:\r\n      return { ...state, userGroups: action.data }\r\n\r\n    case USER_SET_CURRENT_USERNAME:\r\n      return { ...state, currentUsername: action.data }\r\n\r\n    case USER_SET_CURRENT_ID:\r\n      return { ...state, currentUserId: action.data }\r\n\r\n    case USER_SET_CURRENT_LEVEL:\r\n      return { ...state, currentUserLevel: action.data }\r\n\r\n    case USER_SET_GROUP_FORM:{\r\n      let newGroupForm = {...state.groupForm, [action.data.name]: action.data.value}\r\n      return { ...state, groupForm: newGroupForm }\r\n    }\r\n\r\n    case USER_SET_USERS:\r\n      return { ...state, users: action.data }\r\n\r\n    case USER_CLEAR_ADD_FORM:\r\n      return { ...state, addForm: initialState.addForm }\r\n\r\n    case USER_CLEAR_GROUP_FORM: \r\n      return { ...state, groupForm: initialState.groupForm }\r\n\r\n    case USER_SET_PRELOADER:\r\n      return { ...state, preloader: action.data}\r\n\r\n    default: \r\n      return state\r\n  }\r\n}\r\n\r\nexport default userReducer","import {\r\n  VIDEO_SET_VIDEOS,\r\n  VIDEO_SET_CURRENT_VIDEO,\r\n  VIDEO_SET_USER_LEVEL,\r\n  VIDEO_SET_ADD_FORM,\r\n  VIDEO_SET_SUCCEED,\r\n  VIDEO_SET_APPROVED,\r\n  VIDEO_CLEAR_ADD_FORM,\r\n  VIDEO_SET_PRELOADER\r\n} from \"../actions/videoActions\"\r\n\r\nconst initialState = {\r\n  videos: [],\r\n  currentVideo: {\r\n    id: 0,\r\n    name: \"\",\r\n    link: \"\",\r\n    source: \"\",\r\n    isApproved: false\r\n  },\r\n  userLevel: 0,\r\n  addVideoForm: {\r\n    name: \"\",\r\n    filetype: \"\",\r\n    outerLink: \"\",\r\n    file: null\r\n  },\r\n  isSucceed: false,\r\n  preloader: false\r\n}\r\n\r\nfunction videoReducer (state = initialState, action) {\r\n  switch (action.type) {\r\n    case VIDEO_SET_VIDEOS: \r\n      return { ...state, videos: action.data }\r\n\r\n    case VIDEO_SET_CURRENT_VIDEO: \r\n      const newCurrentVideo = {\r\n        id: action.data.id,\r\n        name: action.data.name,\r\n        link: action.data.link,\r\n        source: action.data.source,\r\n        isApproved: state.currentVideo.isApproved\r\n      }\r\n      return { ...state, currentVideo: newCurrentVideo }\r\n\r\n    case VIDEO_SET_USER_LEVEL: \r\n      return { ...state, userLevel: action.data.userLevel }\r\n\r\n    case VIDEO_SET_ADD_FORM: {\r\n      const newAddVideoForm = { ...state.addVideoForm, [action.data.name]: action.data.value}\r\n      return { ...state, addVideoForm: newAddVideoForm }\r\n    }\r\n\r\n    case VIDEO_SET_SUCCEED: \r\n      return { ...state, isSucceed: action.data.isSucceed }\r\n\r\n    case VIDEO_SET_APPROVED: {\r\n      const newCurrentVideo = { ...state.currentVideo, isApproved: action.data.value }\r\n      return { ...state, currentVideo: newCurrentVideo}\r\n    }\r\n\r\n    case VIDEO_CLEAR_ADD_FORM: {\r\n      return {...state, addVideoForm: initialState.addVideoForm}\r\n    }\r\n\r\n    case VIDEO_SET_PRELOADER: {\r\n      return {...state, preloader: action.data}\r\n    }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default videoReducer","import {\r\n  USERGROUP_SET_GROUPS,\r\n  USERGROUP_SET_FORM,\r\n  USERGROUP_SET_DEVICE_GROUPS,\r\n  USERGROUP_SET_SUCCEED,\r\n  USERGROUP_CLEAR_FORM,\r\n  USERGROUP_SET_PRELOADER\r\n} from \"../actions/usergroupActions\"\r\n\r\nconst initialState = {\r\n  userGroups: [],\r\n  addForm: {\r\n    name: \"\",\r\n    devicegroupId: 0\r\n  },\r\n  deviceGroups: [],\r\n  isSucceed: 0,\r\n  preloader: false\r\n}\r\n\r\nfunction usergroupReducer (state = initialState, action) {\r\n  switch (action.type) {\r\n    case USERGROUP_SET_GROUPS:\r\n      return { ...state, userGroups: action.data}\r\n\r\n    case USERGROUP_SET_FORM:{\r\n      const newAddForm = { ...state.addForm, [action.data.name]: action.data.value}\r\n      return { ...state, addForm: newAddForm }\r\n    }\r\n\r\n    case USERGROUP_SET_DEVICE_GROUPS:\r\n      return { ...state, deviceGroups: action.data }\r\n\r\n    case USERGROUP_SET_SUCCEED:\r\n      return { ...state, isSucceed: action.data.isSucceed }\r\n\r\n    case USERGROUP_CLEAR_FORM: \r\n      return { ...state, addForm: initialState.addForm}\r\n\r\n    case USERGROUP_SET_PRELOADER:\r\n      return { ...state, preloader: action.data}\r\n      \r\n    default: \r\n      return state\r\n  }\r\n}\r\n\r\nexport default usergroupReducer","import { combineReducers, createStore, compose, applyMiddleware } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport deviceGroupReducer from './reducers/deivceGroupReducer'\r\nimport authReducer from './reducers/authReducer'\r\nimport cabinetReducer from './reducers/cabinetReducer'\r\nimport playlistReducer from './reducers/playlistReducer'\r\nimport scheduleReducer from './reducers/scheduleReducer'\r\nimport userReducer from './reducers/userReducer'\r\nimport videoReducer from './reducers/videoReducer'\r\nimport usergroupReducer from './reducers/usergroupReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n  authReducer,\r\n  cabinetReducer,\r\n  deviceGroupReducer,\r\n  playlistReducer,\r\n  scheduleReducer,\r\n  userReducer,\r\n  videoReducer,\r\n  usergroupReducer\r\n})\r\n\r\nconst store = createStore(rootReducer, compose(\r\n  applyMiddleware(thunk)\r\n))\r\n\r\nexport default store","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n//import './robotoFont.css';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store/store'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}